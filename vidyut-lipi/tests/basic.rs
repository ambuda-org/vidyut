use vidyut_lipi::Scheme::*;
use vidyut_lipi::{Lipika, Scheme};

/// A quick alias for transliterating.
fn t(input: &str, from: Scheme, to: Scheme) -> String {
    let mut lipika = Lipika::new();
    lipika.transliterate(input, from, to)
}

/// Asserts that `input` produces `expected` when transliterated from `from` to `to`.
fn assert_transliterate(input: &str, from: Scheme, to: Scheme, expected: &str) {
    let actual = t(input, from, to);
    if expected != actual {
        let e_codes: Vec<_> = expected.chars().map(|c| c as u32).collect();
        let a_codes: Vec<_> = actual.chars().map(|c| c as u32).collect();
        let e_slp1 = t(expected, to, Scheme::Slp1);
        let a_slp1 = t(&actual, to, Scheme::Slp1);
        println!(
            "input: {input} ({from:?} --> {to:?})

expected: {}
          {e_codes:x?}
          (slp1: {e_slp1})

actual:   {}
          {a_codes:x?}
          (slp1: {a_slp1})
",
            expected, actual
        );
    }
    assert_eq!(*expected, actual);
}

/// Transliterates all input strings against each other.
///
/// Use this function if round-trip transliteration is lossless.
fn assert_two_way_pairwise(examples: &[(Scheme, &str)]) {
    for (from, input) in examples {
        for (to, expected) in examples {
            // Also test the case where "from == to." In this case, we should return the original
            // input string unchanged.
            assert_transliterate(input, *from, *to, expected);
        }
    }
}

/// Transliterates `reference` into each item in `examples`.
///
/// Use this function if transliteration is lossy from `reference` to the given `examples`. All
/// `examples` are also round-tripped with each other through `assert_two_way_pairwise`.
fn assert_one_way_pairwise(reference: (Scheme, &str), examples: &[(Scheme, &str)]) {
    let from = reference.0;
    let input = reference.1;

    for (to, expected) in examples {
        // Also test the case where "from == to." In this case, we should return the original
        // input string unchanged.
        assert_transliterate(input, from, *to, expected);
    }

    assert_two_way_pairwise(examples);
}

fn assert_supports_unicode_variants(scheme: Scheme, test_cases: &[&str]) {
    use unicode_normalization::UnicodeNormalization;

    let mut lipika = Lipika::new();
    for case in test_cases {
        let input_nfc: String = case.nfc().collect();
        let input_nfd: String = case.nfd().collect();
        assert_ne!(
            input_nfc, input_nfd,
            "Unicode test case '{case}' should have separate NFC and NFD forms."
        );

        // The choice of output_scheme does not really matter here. What we're testing is that the
        // transliterator treats our two inputs in the same way.
        let output_scheme = Scheme::Itrans;
        let output_nfc = lipika.transliterate(&input_nfc, scheme, output_scheme);
        let output_nfd = lipika.transliterate(&input_nfd, scheme, output_scheme);
        assert_eq!(
            output_nfc, output_nfd,
            "Unicode test case '{case}' has two transliterations. (NFC = '{output_nfc}', NFD = '{output_nfd}').",
        );
    }
}

// Sanskrit (Basic)
// ----------------

#[test]
fn sanskrit_independent_vowels() {
    let slp1_text = "a A i I u U f F x X e E o O";
    assert_two_way_pairwise(&[
        (BarahaSouth, "a A i I u U Ru RU ~lu ~lU E ai O au"),
        (HarvardKyoto, "a A i I u U R RR lR lRR e ai o au"),
        (Iast, "a ƒÅ i ƒ´ u ≈´ ·πõ ·πù ·∏∑ ·∏π e ai o au"),
        (Iso15919, "a ƒÅ i ƒ´ u ≈´ rÃ• rÃ•ÃÑ lÃ• lÃ•ÃÑ ƒì ai ≈ç au"),
        (Itrans, "a A i I u U RRi RRI LLi LLI e ai o au"),
        (Slp1, slp1_text),
        (Velthuis, "a aa i ii u uu .r .R .l .L e ai o au"),
        (Wx, "a A i I u U q Q L LV e E o O"),
        // Indic
        (Balinese, "·¨Ö ·¨Ü ·¨á ·¨à ·¨â ·¨ä ·¨ã ·¨å ·¨ç ·¨é ·¨è ·¨ê ·¨ë ·¨í"),
        (Bengali, "‡¶Ö ‡¶Ü ‡¶á ‡¶à ‡¶â ‡¶ä ‡¶ã ‡ß† ‡¶å ‡ß° ‡¶è ‡¶ê ‡¶ì ‡¶î"),
        (Brahmi, "ëÄÖ ëÄÜ ëÄá ëÄà ëÄâ ëÄä ëÄã ëÄå ëÄç ëÄé ëÄè ëÄê ëÄë ëÄí"),
        (Burmese, "·Ä° ·Ä°·Ä¨ ·Ä£ ·Ä§ ·Ä• ·Ä¶ ·Åí ·Åì ·Åî ·Åï ·Äß ·Ä°·Ä≤ ·Ä© ·Ä™"),
        // (Cham, "Í®Ä Í®ÄÍ®© Í®Å Í®ÅÍ®© Í®Ç Í®ÇÍ®© Í®£Í®Æ Í®£Í®ÆÍ®© Í®§Í®Æ Í®§Í®ÆÍ®© Í®É Í®Ñ Í®Ö Í®ÄÍ®ØÍ®±"),
        (Devanagari, "‡§Ö ‡§Ü ‡§á ‡§à ‡§â ‡§ä ‡§ã ‡•† ‡§å ‡•° ‡§è ‡§ê ‡§ì ‡§î"),
        (Dogra, "ë†Ä ë†Å ë†Ç ë†É ë†Ñ ë†Ö ë†§ë†≠ ë†§ë†Æ ë†•ë†≠ ë†•ë†Æ ë†Ü ë†á ë†à ë†â"),
        (Grantha, "ëåÖ ëåÜ ëåá ëåà ëåâ ëåä ëåã ëç† ëåå ëç° ëåè ëåê ëåì ëåî"),
        (Gujarati, "‡™Ö ‡™Ü ‡™á ‡™à ‡™â ‡™ä ‡™ã ‡´† ‡™å ‡´° ‡™è ‡™ê ‡™ì ‡™î"),
        (Javanese, "Í¶Ñ Í¶ÑÍ¶¥ Í¶Ü Í¶á Í¶à Í¶àÍ¶¥ Í¶â Í¶âÍ¶¥ Í¶ä Í¶ã Í¶å Í¶ç Í¶é Í¶éÍ¶¥"),
        (Kannada, "‡≤Ö ‡≤Ü ‡≤á ‡≤à ‡≤â ‡≤ä ‡≤ã ‡≥† ‡≤å ‡≥° ‡≤è ‡≤ê ‡≤ì ‡≤î"),
        (Khmer, "·û¢ ·û¢·û∂ ·û• ·û¶ ·ûß ·û© ·û´ ·û¨ ·û≠ ·ûÆ ·ûØ ·û∞ ·û± ·û≥"),
        (Malayalam, "‡¥Ö ‡¥Ü ‡¥á ‡¥à ‡¥â ‡¥ä ‡¥ã ‡µ† ‡¥å ‡µ° ‡¥è ‡¥ê ‡¥ì ‡¥î"),
        (Modi, "ëòÄ ëòÅ ëòÇ ëòÉ ëòÑ ëòÖ ëòÜ ëòá ëòà ëòâ ëòä ëòã ëòå ëòç"),
        (Newa, "ëêÄ ëêÅ ëêÇ ëêÉ ëêÑ ëêÖ ëêÜ ëêá ëêà ëêâ ëêä ëêã ëêå ëêç"),
        (Odia, "‡¨Ö ‡¨Ü ‡¨á ‡¨à ‡¨â ‡¨ä ‡¨ã ‡≠† ‡¨å ‡≠° ‡¨è ‡¨ê ‡¨ì ‡¨î"),
        (Saurashtra, "Í¢Ç Í¢É Í¢Ñ Í¢Ö Í¢Ü Í¢á Í¢à Í¢â Í¢ä Í¢ã Í¢ç Í¢é Í¢ê Í¢ë"),
        (Sharada, "ëÜÉ ëÜÑ ëÜÖ ëÜÜ ëÜá ëÜà ëÜâ ëÜä ëÜã ëÜå ëÜç ëÜé ëÜè ëÜê"),
        (Sinhala, "‡∂Ö ‡∂Ü ‡∂â ‡∂ä ‡∂ã ‡∂å ‡∂ç ‡∂é ‡∂è ‡∂ê ‡∂í ‡∂ì ‡∂ï ‡∂ñ"),
        (TaiTham, "·©ã ·©ã·©£ ·©ç ·©é ·©è ·©ê ·©Ç ·©Ç·©£ ·©Ñ ·©Ñ·©£ ·©ë ·©ã·©± ·©í ·©è·©´·©£"),
        (Tamil, "‡ÆÖ ‡ÆÜ ‡Æá ‡Æà ‡Æâ ‡Æä ‡Æ∞‡ØÅ º ‡Æ∞‡ØÇ º ‡Æ≤‡ØÅ º ‡Æ≤‡ØÇ º ‡Æè ‡Æê ‡Æì ‡Æî"),
        (Telugu, "‡∞Ö ‡∞Ü ‡∞á ‡∞à ‡∞â ‡∞ä ‡∞ã ‡±† ‡∞å ‡±° ‡∞è ‡∞ê ‡∞ì ‡∞î"),
        (Thai, "‡∏≠ ‡∏≠‡∏≤ ‡∏≠‡∏¥ ‡∏≠‡∏µ ‡∏≠‡∏∏ ‡∏≠‡∏π ‡∏§ ‡∏§‡πÖ ‡∏¶ ‡∏¶‡πÖ ‡πÄ‡∏≠ ‡πÑ‡∏≠ ‡πÇ‡∏≠ ‡πÄ‡∏≠‡∏≤"),
        (Tirhuta, "ëíÅ ëíÇ ëíÉ ëíÑ ëíÖ ëíÜ ëíá ëíà ëíâ ëíä ëíã ëíå ëíç ëíé"),
        (Tibetan, "‡Ω®‡ºã‡Ω®‡Ω±‡ºã‡Ω®‡Ω≤‡ºã‡Ω®‡Ω±‡Ω≤‡ºã‡Ω®‡Ω¥‡ºã‡Ω®‡Ω±‡Ω¥‡ºã‡Ω¢‡æÄ‡ºã‡Ω¢‡Ω±‡æÄ‡ºã‡Ω£‡æÄ‡ºã‡Ω£‡Ω±‡æÄ‡ºã‡Ω®‡Ω∫‡ºã‡Ω®‡Ωª‡ºã‡Ω®‡Ωº‡ºã‡Ω®‡ΩΩ"),
        (ZanabazarSquare, "ë®Ä ë®Äë®ä ë®Äë®Å ë®Äë®Åë®ä ë®Äë®Ç ë®Äë®Çë®ä ë®´ë®â ë®´ë®âë®ä ë®¨ë®â ë®¨ë®âë®ä ë®Äë®Ñ ë®Äë®Ñë®ä ë®Äë®Ü ë®Äë®Üë®ä"),
    ]);

    // Scripts with no vocalic LL
    assert_one_way_pairwise(
        (Slp1, slp1_text),
        &[(Bhaiksuki, "ë∞Äë±Éë∞Åë±Éë∞Çë±Éë∞Éë±Éë∞Ñë±Éë∞Öë±Éë∞Üë±Éë∞áë±Éë∞àë±Éë∞àë±Éë∞äë±Éë∞ãë±Éë∞åë±Éë∞ç")],
    );

    // Scripts with no vocalic L/LL
    assert_two_way_pairwise(&[
        (Slp1, slp1_text),
        (Nandinagari, "ë¶† ë¶° ë¶¢ ë¶£ ë¶§ ë¶• ë¶¶ ë¶ß ëßâëßî ëßâëßï ë¶™ ë¶´ ë¶¨ ë¶≠"),
        (Siddham, "ëñÄ ëñÅ ëñÇ ëñÉ ëñÑ ëñÖ ëñÜ ëñá ëñà ëñâ ëñä ëñã ëñå ëñç"),
    ]);

    // Scripts with no vocalic R/RR or L/LL
    assert_two_way_pairwise(&[
        (Slp1, slp1_text),
        (GunjalaGondi, "ëµ† ëµ° ëµ¢ ëµ£ ëµ§ ëµ• ë∂àë∂ç ë∂àë∂é ëµµë∂ç ëµµë∂é ëµß ëµ® ëµ™ ëµ´"),
        (Gurmukhi, "‡®Ö ‡®Ü ‡®á ‡®à ‡®â ‡®ä ‡®∞‡©Å ‡®∞‡©Ç ‡®≤‡©Å ‡®≤‡©Ç ‡®è ‡®ê ‡®ì ‡®î"),
        (Kaithi, "ëÇÉ ëÇÑ ëÇÖ ëÇÜ ëÇá ëÇà ëÇ©ëÇ± ëÇ©ëÇ≤ ëÇ™ëÇ± ëÇ™ëÇ≤ ëÇâ ëÇä ëÇã ëÇå"),
        (Khudawadi, "ëä∞ ëä± ëä≤ ëä≥ ëä¥ ëäµ ëãôëã° ëãôëã¢ ëãöëã° ëãöëã¢ ëä∂ ëä∑ ëä∏ ëäπ"),
        (MasaramGondi, "ë¥Ä ë¥Å ë¥Ç ë¥É ë¥Ñ ë¥Ö ë¥¶ë¥∂ ë¥¶ë¥µ ë¥ßë¥¥ ë¥ßë¥µ ë¥Ü ë¥à ë¥â ë¥ã"),
        (OlChiki, "·±ö ·±ü ·±§ ·±§·±ª ·±© ·±©·±ª ·±®·±© ·±®·±©·±ª ·±û·±© ·±û·±©·±ª ·±Æ ·±ö·±§ ·±≥ ·±ö·±©"),
        (Takri, "ëöÄ ëöÅ ëöÇ ëöÉ ëöÑ ëöÖ ëö§ëöÆ ëö§ëöØ ëö•ëöÆ ëö•ëöØ ëöÜ ëöá ëöà ëöâ"),
    ]);

    // No vocalir R/RR/L/LL or long U
    assert_transliterate(
        slp1_text,
        Slp1,
        MeeteiMayek,
        "ÍØë ÍØëÍØ• ÍØè ÍØè ÍØé ÍØé ÍØîÍØ® ÍØîÍØ® ÍØÇÍØ® ÍØÇÍØ® ÍØëÍØ¶ ÍØëÍØ© ÍØëÍØ£ ÍØëÍØß",
    );
}

#[test]
fn sanskrit_dependent_vowels() {
    let slp1_text = "ka kA ki kI ku kU kf kF kx kX ke kE ko kO";

    assert_two_way_pairwise(&[
        (
            BarahaSouth,
            "ka kA ki kI ku kU kRu kRU k~lu k~lU kE kai kO kau",
        ),
        (
            HarvardKyoto,
            "ka kA ki kI ku kU kR kRR klR klRR ke kai ko kau",
        ),
        (Iast, "ka kƒÅ ki kƒ´ ku k≈´ k·πõ k·πù k·∏∑ k·∏π ke kai ko kau"),
        (Iso15919, "ka kƒÅ ki kƒ´ ku k≈´ krÃ• krÃ•ÃÑ klÃ• klÃ•ÃÑ kƒì kai k≈ç kau"),
        (
            Itrans,
            "ka kA ki kI ku kU kRRi kRRI kLLi kLLI ke kai ko kau",
        ),
        (Slp1, slp1_text),
        (
            Velthuis,
            "ka kaa ki kii ku kuu k.r k.R k.l k.L ke kai ko kau",
        ),
        (Wx, "ka kA ki kI ku kU kq kQ kL kLV ke kE ko kO"),
        // Indic
        (Balinese, "·¨ì ·¨ì·¨µ ·¨ì·¨∂ ·¨ì·¨∑ ·¨ì·¨∏ ·¨ì·¨π ·¨ì·¨∫ ·¨ì·¨ª ·¨ì·¨º ·¨ì·¨Ω ·¨ì·¨æ ·¨ì·¨ø ·¨ì·≠Ä ·¨ì·≠Å"),
        (Bengali, "‡¶ï ‡¶ï‡¶æ ‡¶ï‡¶ø ‡¶ï‡ßÄ ‡¶ï‡ßÅ ‡¶ï‡ßÇ ‡¶ï‡ßÉ ‡¶ï‡ßÑ ‡¶ï‡ß¢ ‡¶ï‡ß£ ‡¶ï‡ßá ‡¶ï‡ßà ‡¶ï‡ßã ‡¶ï‡ßå"),
        (Brahmi, "ëÄì ëÄìëÄ∏ ëÄìëÄ∫ ëÄìëÄª ëÄìëÄº ëÄìëÄΩ ëÄìëÄæ ëÄìëÄø ëÄìëÅÄ ëÄìëÅÅ ëÄìëÅÇ ëÄìëÅÉ ëÄìëÅÑ ëÄìëÅÖ"),
        (Burmese, "·ÄÄ ·ÄÄ·Ä¨ ·ÄÄ·Ä≠ ·ÄÄ·ÄÆ ·ÄÄ·ÄØ ·ÄÄ·Ä∞ ·ÄÄ·Åñ ·ÄÄ·Åó ·ÄÄ·Åò ·ÄÄ·Åô ·ÄÄ·Ä± ·ÄÄ·Ä≤ ·ÄÄ·Ä±·Ä¨ ·ÄÄ·Ä±·Ä¨·Ä∫"),
        // (Cham, "Í®Ü Í®ÜÍ®© Í®ÜÍ®™ Í®ÜÍ®´ Í®ÜÍ®≠ Í®ÜÍ®≠Í®© Í®ÜÍ®¥Í®Æ Í®ÜÍ®¥Í®ÆÍ®© Í®ÜÍ®µÍ®Æ Í®ÜÍ®µÍ®ÆÍ®© Í®ÜÍ®ØÍ®Æ Í®ÜÍ®∞ Í®ÜÍ®Ø Í®ÜÍ®ØÍ®±"),
        (Devanagari, "‡§ï ‡§ï‡§æ ‡§ï‡§ø ‡§ï‡•Ä ‡§ï‡•Å ‡§ï‡•Ç ‡§ï‡•É ‡§ï‡•Ñ ‡§ï‡•¢ ‡§ï‡•£ ‡§ï‡•á ‡§ï‡•à ‡§ï‡•ã ‡§ï‡•å"),
        (Dogra, "ë†ä ë†äë†¨ ë†äë†≠ ë†äë†Æ ë†äë†Ø ë†äë†∞ ë†äë†± ë†äë†≤ ë†äë†πë†•ë†≠ ë†äë†πë†•ë†Æ ë†äë†≥ ë†äë†¥ ë†äë†µ ë†äë†∂"),
        (Grantha, "ëåï ëåïëåæ ëåïëåø ëåïëçÄ ëåïëçÅ ëåïëçÇ ëåïëçÉ ëåïëçÑ ëåïëç¢ ëåïëç£ ëåïëçá ëåïëçà ëåïëçã ëåïëçå"),
        (Gujarati, "‡™ï ‡™ï‡™æ ‡™ï‡™ø ‡™ï‡´Ä ‡™ï‡´Å ‡™ï‡´Ç ‡™ï‡´É ‡™ï‡´Ñ ‡™ï‡´¢ ‡™ï‡´£ ‡™ï‡´á ‡™ï‡´à ‡™ï‡´ã ‡™ï‡´å"),
        (Javanese, "Í¶è Í¶èÍ¶¥ Í¶èÍ¶∂ Í¶èÍ¶∑ Í¶èÍ¶∏ Í¶èÍ¶π Í¶èÍ¶Ω Í¶èÍßÄÍ¶âÍ¶¥ Í¶èÍßÄÍ¶ä Í¶èÍßÄÍ¶ã Í¶èÍ¶∫ Í¶èÍ¶ª Í¶èÍ¶∫Í¶¥ Í¶èÍ¶ªÍ¶¥"),
        (Kannada, "‡≤ï ‡≤ï‡≤æ ‡≤ï‡≤ø ‡≤ï‡≥Ä ‡≤ï‡≥Å ‡≤ï‡≥Ç ‡≤ï‡≥É ‡≤ï‡≥Ñ ‡≤ï‡≥¢ ‡≤ï‡≥£ ‡≤ï‡≥á ‡≤ï‡≥à ‡≤ï‡≥ã ‡≤ï‡≥å"),
        (Khmer, "·ûÄ ·ûÄ·û∂ ·ûÄ·û∑ ·ûÄ·û∏ ·ûÄ·ûª ·ûÄ·ûº ·ûÄ·üí·û´ ·ûÄ·üí·û¨ ·ûÄ·üí·û≠ ·ûÄ·üí·ûÆ ·ûÄ·üÅ ·ûÄ·üÉ ·ûÄ·üÑ ·ûÄ·üÖ"),
        (Malayalam, "‡¥ï ‡¥ï‡¥æ ‡¥ï‡¥ø ‡¥ï‡µÄ ‡¥ï‡µÅ ‡¥ï‡µÇ ‡¥ï‡µÉ ‡¥ï‡µÑ ‡¥ï‡µ¢ ‡¥ï‡µ£ ‡¥ï‡µá ‡¥ï‡µà ‡¥ï‡µã ‡¥ï‡µå"),
        (Modi, "ëòé ëòéëò∞ ëòéëò± ëòéëò≤ ëòéëò≥ ëòéëò¥ ëòéëòµ ëòéëò∂ ëòéëò∑ ëòéëò∏ ëòéëòπ ëòéëò∫ ëòéëòª ëòéëòº"),
        (Newa, "ëêé ëêéëêµ ëêéëê∂ ëêéëê∑ ëêéëê∏ ëêéëêπ ëêéëê∫ ëêéëêª ëêéëêº ëêéëêΩ ëêéëêæ ëêéëêø ëêéëëÄ ëêéëëÅ"),
        (Odia, "‡¨ï ‡¨ï‡¨æ ‡¨ï‡¨ø ‡¨ï‡≠Ä ‡¨ï‡≠Å ‡¨ï‡≠Ç ‡¨ï‡≠É ‡¨ï‡≠Ñ ‡¨ï‡≠¢ ‡¨ï‡≠£ ‡¨ï‡≠á ‡¨ï‡≠à ‡¨ï‡≠ã ‡¨ï‡≠å"),
        (Saurashtra, "Í¢í Í¢íÍ¢µ Í¢íÍ¢∂ Í¢íÍ¢∑ Í¢íÍ¢∏ Í¢íÍ¢π Í¢íÍ¢∫ Í¢íÍ¢ª Í¢íÍ¢º Í¢íÍ¢Ω Í¢íÍ¢ø Í¢íÍ£Ä Í¢íÍ£Ç Í¢íÍ£É"),
        (Sharada, "ëÜë ëÜëëÜ≥ ëÜëëÜ¥ ëÜëëÜµ ëÜëëÜ∂ ëÜëëÜ∑ ëÜëëÜ∏ ëÜëëÜπ ëÜëëÜ∫ ëÜëëÜª ëÜëëÜº ëÜëëÜΩ ëÜëëÜæ ëÜëëÜø"),
        (Sinhala, "‡∂ö ‡∂ö‡∑è ‡∂ö‡∑í ‡∂ö‡∑ì ‡∂ö‡∑î ‡∂ö‡∑ñ ‡∂ö‡∑ò ‡∂ö‡∑≤ ‡∂ö‡∑ü ‡∂ö‡∑≥ ‡∂ö‡∑ö ‡∂ö‡∑õ ‡∂ö‡∑ù ‡∂ö‡∑û"),
        (TaiTham, "·®† ·®†·©£ ·®†·©• ·®†·©¶ ·®†·©© ·®†·©™ ·®†·©∫·©Ç ·®†·©∫·©Ç·©£ ·®†·©∫·©Ñ ·®†·©∫·©Ñ·©£ ·®†·©Æ ·®†·©± ·®†·©Æ·©£ ·®†·©Æ·©´·©£"),
        (Tamil, "‡Æï ‡Æï‡Ææ ‡Æï‡Æø ‡Æï‡ØÄ ‡Æï‡ØÅ ‡Æï‡ØÇ ‡Æï‡Øç‡Æ∞‡ØÅ º ‡Æï‡Øç‡Æ∞‡ØÇ º ‡Æï‡Øç‡Æ≤‡ØÅ º ‡Æï‡Øç‡Æ≤‡ØÇ º ‡Æï‡Øá ‡Æï‡Øà ‡Æï‡Øã ‡Æï‡Øå"),
        (Telugu, "‡∞ï ‡∞ï‡∞æ ‡∞ï‡∞ø ‡∞ï‡±Ä ‡∞ï‡±Å ‡∞ï‡±Ç ‡∞ï‡±É ‡∞ï‡±Ñ ‡∞ï‡±¢ ‡∞ï‡±£ ‡∞ï‡±á ‡∞ï‡±à ‡∞ï‡±ã ‡∞ï‡±å"),
        (Thai, "‡∏Å ‡∏Å‡∏≤ ‡∏Å‡∏¥ ‡∏Å‡∏µ ‡∏Å‡∏∏ ‡∏Å‡∏π ‡∏Å‡∏∫‡∏§ ‡∏Å‡∏∫‡∏§‡πÖ ‡∏Å‡∏∫‡∏¶ ‡∏Å‡∏∫‡∏¶‡πÖ ‡πÄ‡∏Å ‡πÑ‡∏Å ‡πÇ‡∏Å ‡πÄ‡∏Å‡∏≤"),
        (Tibetan, "‡ΩÄ‡ºã‡ΩÄ‡Ω±‡ºã‡ΩÄ‡Ω≤‡ºã‡ΩÄ‡Ω±‡Ω≤‡ºã‡ΩÄ‡Ω¥‡ºã‡ΩÄ‡Ω±‡Ω¥‡ºã‡ΩÄ‡æ≤‡æÄ‡ºã‡ΩÄ‡æ≤‡Ω±‡æÄ‡ºã‡ΩÄ‡æ≥‡æÄ‡ºã‡ΩÄ‡æ≥‡Ω±‡æÄ‡ºã‡ΩÄ‡Ω∫‡ºã‡ΩÄ‡Ωª‡ºã‡ΩÄ‡Ωº‡ºã‡ΩÄ‡ΩΩ"),
        (Tirhuta, "ëíè ëíèëí∞ ëíèëí± ëíèëí≤ ëíèëí≥ ëíèëí¥ ëíèëíµ ëíèëí∂ ëíèëí∑ ëíèëí∏ ëíèëíπ ëíèëíª ëíèëíº ëíèëíæ"),
    ]);

    // Scripts without vocalic L
    assert_one_way_pairwise(
        (Slp1, slp1_text),
        &[(Bhaiksuki, "ë∞éë±Éë∞éë∞Øë±Éë∞éë∞∞ë±Éë∞éë∞±ë±Éë∞éë∞≤ë±Éë∞éë∞≥ë±Éë∞éë∞¥ë±Éë∞éë∞µë±Éë∞éë∞∂ë±Éë∞éë∞∂ë±Éë∞éë∞∏ë±Éë∞éë∞πë±Éë∞éë∞∫ë±Éë∞éë∞ª")],
    );

    // Scripts without vocalic L/LL
    assert_two_way_pairwise(&[
        (Slp1, slp1_text),
        (Nandinagari, "ë¶Æ ë¶Æëßë ë¶Æëßí ë¶Æëßì ë¶Æëßî ë¶Æëßï ë¶Æëßñ ë¶Æëßó ë¶Æëß†ëßâëßî ë¶Æëß†ëßâëßï ë¶Æëßö ë¶Æëßõ ë¶Æëßú ë¶Æëßù"),
        (Siddham, "ëñé ëñéëñØ ëñéëñ∞ ëñéëñ± ëñéëñ≤ ëñéëñ≥ ëñéëñ¥ ëñéëñµ ëñéëñøëñ©ëñ∞ ëñéëñøëñ©ëñ± ëñéëñ∏ ëñéëñπ ëñéëñ∫ ëñéëñª"),
    ]);

    // Scripts without vocalic R/RR or L/LL
    assert_two_way_pairwise(&[
        (Slp1, slp1_text),
        (Gurmukhi, "‡®ï ‡®ï‡®æ ‡®ï‡®ø ‡®ï‡©Ä ‡®ï‡©Å ‡®ï‡©Ç ‡®ï‡©ç‡®∞‡©Å ‡®ï‡©ç‡®∞‡©Ç ‡®ï‡©ç‡®≤‡©Å ‡®ï‡©ç‡®≤‡©Ç ‡®ï‡©á ‡®ï‡©à ‡®ï‡©ã ‡®ï‡©å"),
        (GunjalaGondi, "ëµ± ëµ±ë∂ä ëµ±ë∂ã ëµ±ë∂å ëµ±ë∂ç ëµ±ë∂é ëµ±ë∂óë∂àë∂ç ëµ±ë∂óë∂àë∂é ëµ±ë∂óëµµë∂ç ëµ±ë∂óëµµë∂é ëµ±ë∂ê ëµ±ë∂ë ëµ±ë∂ì ëµ±ë∂î"),
        (Kaithi, "ëÇç ëÇçëÇ∞ ëÇçëÇ± ëÇçëÇ≤ ëÇçëÇ≥ ëÇçëÇ¥ ëÇçëÇπëÇ©ëÇ± ëÇçëÇπëÇ©ëÇ≤ ëÇçëÇπëÇ™ëÇ± ëÇçëÇπëÇ™ëÇ≤ ëÇçëÇµ ëÇçëÇ∂ ëÇçëÇ∑ ëÇçëÇ∏"),
        (Khudawadi, "ëä∫ ëä∫ëã† ëä∫ëã° ëä∫ëã¢ ëä∫ëã£ ëä∫ëã§ ëä∫ëã™ëãôëã° ëä∫ëã™ëãôëã¢ ëä∫ëã™ëãöëã° ëä∫ëã™ëãöëã¢ ëä∫ëã• ëä∫ëã¶ ëä∫ëãß ëä∫ëã®"),
        (MasaramGondi, "ë¥å ë¥åë¥± ë¥åë¥≤ ë¥åë¥≥ ë¥åë¥¥ ë¥åë¥µ ë¥åë¥∂ ë¥åëµáë¥µ ë¥åëµÖë¥ßë¥¥ ë¥åëµÖë¥ßë¥µ ë¥åë¥∫ ë¥åë¥º ë¥åë¥Ω ë¥åë¥ø"),
        (
            OlChiki,
            "·±†·±ö ·±†·±ü ·±†·±§ ·±†·±§·±ª ·±†·±© ·±†·±©·±ª ·±†·±®·±© ·±†·±®·±©·±ª ·±†·±û·±© ·±†·±û·±©·±ª ·±†·±Æ ·±†·±ö·±§ ·±†·±≥ ·±†·±ö·±©",
        ),
        (Takri, "ëöä ëöäëö≠ ëöäëöÆ ëöäëöØ ëöäëö∞ ëöäëö± ëöäëö∂ëö§ëöÆ ëöäëö∂ëö§ëöØ ëöäëö∂ëö•ëöÆ ëöäëö∂ëö•ëöØ ëöäëö≤ ëöäëö≥ ëöäëö¥ ëöäëöµ"),
        (ZanabazarSquare, "ë®ã ë®ãë®ä ë®ãë®Å ë®ãë®Åë®ä ë®ãë®Ç ë®ãë®Çë®ä ë®ãë©áë®´ë®â ë®ãë©áë®´ë®âë®ä ë®ãë©áë®¨ë®â ë®ãë©áë®¨ë®âë®ä ë®ãë®Ñ ë®ãë®Ñë®ä ë®ãë®Ü ë®ãë®Üë®ä"),
    ]);

    // Scripts without R/RR/L/LL or long U.
    assert_transliterate(
        slp1_text,
        Slp1,
        MeeteiMayek,
        "ÍØÄ ÍØÄÍØ• ÍØÄÍØ§ ÍØÄÍØ§ ÍØÄÍØ® ÍØÄÍØ® ÍØõÍØîÍØ® ÍØõÍØîÍØ® ÍØõÍØÇÍØ® ÍØõÍØÇÍØ® ÍØÄÍØ¶ ÍØÄÍØ© ÍØÄÍØ£ ÍØÄÍØß",
    );
}

#[test]
fn sanskrit_ayogavahas_etc() {
    assert_two_way_pairwise(&[
        (BarahaSouth, "aM aH a~M"),
        (HarvardKyoto, "aM aH a~"),
        (Iast, "a·πÉ a·∏• amÃê"),
        (Iso15919, "a·πÅ a·∏• amÃê"),
        (Itrans, "aM aH a.N"),
        (Slp1, "aM aH a~"),
        (Velthuis, "a.m a.h a~m"),
        (Wx, "aM aH az"),
        // Indic
        (Balinese, "·¨Ö·¨Ç ·¨Ö·¨Ñ ·¨Ö·¨Å"),
        (Bengali, "‡¶Ö‡¶Ç ‡¶Ö‡¶É ‡¶Ö‡¶Å"),
        (Bhaiksuki, "ë∞Äë∞Ωë±Éë∞Äë∞æë±Éë∞Äë∞º"),
        (Brahmi, "ëÄÖëÄÅ ëÄÖëÄÇ ëÄÖëÄÄ"),
        // (Cham, "Í®ÄÍ©å Í®ÄÍ©ç Í®ÄÍ©É"),
        (Devanagari, "‡§Ö‡§Ç ‡§Ö‡§É ‡§Ö‡§Å"),
        (Grantha, "ëåÖëåÇ ëåÖëåÉ ëåÖëåÅ"),
        (Gujarati, "‡™Ö‡™Ç ‡™Ö‡™É ‡™Ö‡™Å"),
        (Javanese, "Í¶ÑÍ¶Å Í¶ÑÍ¶É Í¶ÑÍ¶Ä"),
        (Kaithi, "ëÇÉëÇÅ ëÇÉëÇÇ ëÇÉëÇÄ"),
        (Kannada, "‡≤Ö‡≤Ç ‡≤Ö‡≤É ‡≤Ö‡≤Å"),
        (Malayalam, "‡¥Ö‡¥Ç ‡¥Ö‡¥É ‡¥Ö‡¥Å"),
        (Newa, "ëêÄëëÑ ëêÄëëÖ ëêÄëëÉ"),
        (Odia, "‡¨Ö‡¨Ç ‡¨Ö‡¨É ‡¨Ö‡¨Å"),
        (OlChiki, "·±ö·±ù ·±ö·±∑ ·±ö·±∏"),
        (Saurashtra, "Í¢ÇÍ¢Ä Í¢ÇÍ¢Å Í¢ÇÍ£Ö"),
        (Sharada, "ëÜÉëÜÅ ëÜÉëÜÇ ëÜÉëÜÄ"),
        (Siddham, "ëñÄëñΩ ëñÄëñæ ëñÄëñº"),
        (Tamil, "‡ÆÖ‡ÆÆ‡Øç º ‡ÆÖÍûâ ‡ÆÖ‡ÆÆ‡ØçÀÆ"),
        (Telugu, "‡∞Ö‡∞Ç ‡∞Ö‡∞É ‡∞Ö‡∞Å"),
        (Tibetan, "‡Ω®‡Ωæ‡ºã‡Ω®‡Ωø‡ºã‡Ω®‡æÉ"),
        (Tirhuta, "ëíÅëìÄ ëíÅëìÅ ëíÅëíø"),
        (ZanabazarSquare, "ë®Äë®∏ ë®Äë®π ë®Äë®µ"),
    ]);

    // Scripts without a chandrabindu
    assert_one_way_pairwise(
        (Slp1, "aM aH a~"),
        &[
            (Burmese, "·Ä°·Ä∂ ·Ä°·Ä∏ ·Ä°·Ä∂"),
            (Dogra, "ë†Äë†∑ ë†Äë†∏ ë†Äë†∑"),
            (GunjalaGondi, "ëµ†ë∂ï ëµ†ë∂ñ ëµ†ë∂ï"),
            (Khmer, "·û¢·üÜ ·û¢·üá ·û¢·üÜ"),
            (Khudawadi, "ëä∞ëãü ëä∞ëãûëã™ ëä∞ëãü"),
            (MasaramGondi, "ë¥ÄëµÄ ë¥ÄëµÅ ë¥ÄëµÄ"),
            (MeeteiMayek, "ÍØëÍØ™ ÍØëÍØçÍØ≠ ÍØëÍØ™"),
            (Modi, "ëòÄëòΩ ëòÄëòæ ëòÄëòΩ"),
            (Nandinagari, "ë¶†ëßû ë¶†ëßü ë¶†ëßû"),
            (Sinhala, "‡∂Ö‡∂Ç ‡∂Ö‡∂É ‡∂Ö‡∂Ç"),
            (TaiTham, "·©ã·©¥ ·©ã·©° ·©ã·©¥"),
            (Takri, "ëöÄëö´ ëöÄëö¨ ëöÄëö´"),
            (Thai, "‡∏≠‡πç ‡∏≠‡∏´‡πå ‡∏≠‡πç"),
        ],
    );
}

#[test]
fn sanskrit_consonants_non_vedic() {
    let slp1 = "ka Ka ga Ga Na ca Ca ja Ja Ya wa Wa qa Qa Ra ta Ta da Da na pa Pa ba Ba ma ya ra la va Sa za sa ha";

    assert_two_way_pairwise(&[
        (BarahaSouth, "ka kha ga gha ~ga cha Cha ja jha ~ja Ta Tha Da Dha Na ta tha da dha na pa pha ba bha ma ya ra la va sha Sha sa ha"),
        (HarvardKyoto, "ka kha ga gha Ga ca cha ja jha Ja Ta Tha Da Dha Na ta tha da dha na pa pha ba bha ma ya ra la va za Sa sa ha"),
        (Iast, "ka kha ga gha ·πÖa ca cha ja jha √±a ·π≠a ·π≠ha ·∏ça ·∏çha ·πáa ta tha da dha na pa pha ba bha ma ya ra la va ≈õa ·π£a sa ha"),
        (Iso15919, "ka kha ga gha ·πÖa ca cha ja jha √±a ·π≠a ·π≠ha ·∏ça ·∏çha ·πáa ta tha da dha na pa pha ba bha ma ya ra la va ≈õa ·π£a sa ha"),
        (Itrans, "ka kha ga gha ~Na cha Cha ja jha ~na Ta Tha Da Dha Na ta tha da dha na pa pha ba bha ma ya ra la va sha Sha sa ha"),
        (Slp1, slp1),
        (Velthuis, "ka kha ga gha \"na ca cha ja jha ~na .ta .tha .da .dha .na ta tha da dha na pa pha ba bha ma ya ra la va \"sa .sa sa ha"),
        (Wx, "ka Ka ga Ga fa ca Ca ja Ja Fa ta Ta da Da Na wa Wa xa Xa na pa Pa ba Ba ma ya ra la va Sa Ra sa ha"),
        // Indic
        (Balinese, "·¨ì ·¨î ·¨ï ·¨ñ ·¨ó ·¨ò ·¨ô ·¨ö ·¨õ ·¨ú ·¨ù ·¨û ·¨ü ·¨† ·¨° ·¨¢ ·¨£ ·¨§ ·¨• ·¨¶ ·¨ß ·¨® ·¨© ·¨™ ·¨´ ·¨¨ ·¨≠ ·¨Æ ·¨Ø ·¨∞ ·¨± ·¨≤ ·¨≥"),
        (Bhaiksuki, "ë∞éë±Éë∞èë±Éë∞êë±Éë∞ëë±Éë∞íë±Éë∞ìë±Éë∞îë±Éë∞ïë±Éë∞ñë±Éë∞óë±Éë∞òë±Éë∞ôë±Éë∞öë±Éë∞õë±Éë∞úë±Éë∞ùë±Éë∞ûë±Éë∞üë±Éë∞†ë±Éë∞°ë±Éë∞¢ë±Éë∞£ë±Éë∞§ë±Éë∞•ë±Éë∞¶ë±Éë∞ßë±Éë∞®ë±Éë∞©ë±Éë∞™ë±Éë∞´ë±Éë∞¨ë±Éë∞≠ë±Éë∞Æ"),
        (Brahmi, "ëÄì ëÄî ëÄï ëÄñ ëÄó ëÄò ëÄô ëÄö ëÄõ ëÄú ëÄù ëÄû ëÄü ëÄ† ëÄ° ëÄ¢ ëÄ£ ëÄ§ ëÄ• ëÄ¶ ëÄß ëÄ® ëÄ© ëÄ™ ëÄ´ ëÄ¨ ëÄ≠ ëÄÆ ëÄØ ëÄ∞ ëÄ± ëÄ≤ ëÄ≥"),
        (Burmese, "·ÄÄ ·ÄÅ ·ÄÇ ·ÄÉ ·ÄÑ ·ÄÖ ·ÄÜ ·Äá ·Äà ·Äâ ·Äã ·Äå ·Äç ·Äé ·Äè ·Äê ·Äë ·Äí ·Äì ·Äî ·Äï ·Äñ ·Äó ·Äò ·Äô ·Äö ·Äõ ·Äú ·Äù ·Åê ·Åë ·Äû ·Äü"),
        (Devanagari, "‡§ï ‡§ñ ‡§ó ‡§ò ‡§ô ‡§ö ‡§õ ‡§ú ‡§ù ‡§û ‡§ü ‡§† ‡§° ‡§¢ ‡§£ ‡§§ ‡§• ‡§¶ ‡§ß ‡§® ‡§™ ‡§´ ‡§¨ ‡§≠ ‡§Æ ‡§Ø ‡§∞ ‡§≤ ‡§µ ‡§∂ ‡§∑ ‡§∏ ‡§π"),
        (Dogra, "ë†ä ë†ã ë†å ë†ç ë†é ë†è ë†ê ë†ë ë†í ë†ì ë†î ë†ï ë†ñ ë†ó ë†ò ë†ô ë†ö ë†õ ë†ú ë†ù ë†û ë†ü ë†† ë†° ë†¢ ë†£ ë†§ ë†• ë†¶ ë†ß ë†® ë†© ë†™"),
        (Grantha, "ëåï ëåñ ëåó ëåò ëåô ëåö ëåõ ëåú ëåù ëåû ëåü ëå† ëå° ëå¢ ëå£ ëå§ ëå• ëå¶ ëåß ëå® ëå™ ëå´ ëå¨ ëå≠ ëåÆ ëåØ ëå∞ ëå≤ ëåµ ëå∂ ëå∑ ëå∏ ëåπ"),
        (Gujarati, "‡™ï ‡™ñ ‡™ó ‡™ò ‡™ô ‡™ö ‡™õ ‡™ú ‡™ù ‡™û ‡™ü ‡™† ‡™° ‡™¢ ‡™£ ‡™§ ‡™• ‡™¶ ‡™ß ‡™® ‡™™ ‡™´ ‡™¨ ‡™≠ ‡™Æ ‡™Ø ‡™∞ ‡™≤ ‡™µ ‡™∂ ‡™∑ ‡™∏ ‡™π"),
        (Javanese, "Í¶è Í¶ë Í¶í Í¶ì Í¶î Í¶ï Í¶ñ Í¶ó Í¶ô Í¶ö Í¶õ Í¶ú Í¶ù Í¶û Í¶ü Í¶† Í¶° Í¶¢ Í¶£ Í¶§ Í¶• Í¶¶ Í¶ß Í¶® Í¶© Í¶™ Í¶´ Í¶≠ Í¶Æ Í¶Ø Í¶∞ Í¶± Í¶≤"),
        (Kaithi, "ëÇç ëÇé ëÇè ëÇê ëÇë ëÇí ëÇì ëÇî ëÇï ëÇñ ëÇó ëÇò ëÇô ëÇõ ëÇù ëÇû ëÇü ëÇ† ëÇ° ëÇ¢ ëÇ£ ëÇ§ ëÇ• ëÇ¶ ëÇß ëÇ® ëÇ© ëÇ™ ëÇ´ ëÇ¨ ëÇ≠ ëÇÆ ëÇØ"),
        (Kannada, "‡≤ï ‡≤ñ ‡≤ó ‡≤ò ‡≤ô ‡≤ö ‡≤õ ‡≤ú ‡≤ù ‡≤û ‡≤ü ‡≤† ‡≤° ‡≤¢ ‡≤£ ‡≤§ ‡≤• ‡≤¶ ‡≤ß ‡≤® ‡≤™ ‡≤´ ‡≤¨ ‡≤≠ ‡≤Æ ‡≤Ø ‡≤∞ ‡≤≤ ‡≤µ ‡≤∂ ‡≤∑ ‡≤∏ ‡≤π"),
        (Khmer, "·ûÄ ·ûÅ ·ûÇ ·ûÉ ·ûÑ ·ûÖ ·ûÜ ·ûá ·ûà ·ûâ ·ûä ·ûã ·ûå ·ûç ·ûé ·ûè ·ûê ·ûë ·ûí ·ûì ·ûî ·ûï ·ûñ ·ûó ·ûò ·ûô ·ûö ·ûõ ·ûú ·ûù ·ûû ·ûü ·û†"),
        (Khudawadi, "ëä∫ ëäª ëäº ëäæ ëäø ëãÄ ëãÅ ëãÇ ëãÑ ëãÖ ëãÜ ëãá ëãà ëãã ëãå ëãç ëãé ëãè ëãê ëãë ëãí ëãì ëãî ëãñ ëãó ëãò ëãô ëãö ëãõ ëãú ëãúëã© ëãù ëãû"),
        (Malayalam, "‡¥ï ‡¥ñ ‡¥ó ‡¥ò ‡¥ô ‡¥ö ‡¥õ ‡¥ú ‡¥ù ‡¥û ‡¥ü ‡¥† ‡¥° ‡¥¢ ‡¥£ ‡¥§ ‡¥• ‡¥¶ ‡¥ß ‡¥® ‡¥™ ‡¥´ ‡¥¨ ‡¥≠ ‡¥Æ ‡¥Ø ‡¥∞ ‡¥≤ ‡¥µ ‡¥∂ ‡¥∑ ‡¥∏ ‡¥π"),
        (MasaramGondi, "ë¥å ë¥ç ë¥é ë¥è ë¥ê ë¥ë ë¥í ë¥ì ë¥î ë¥ï ë¥ñ ë¥ó ë¥ò ë¥ô ë¥ö ë¥õ ë¥ú ë¥ù ë¥û ë¥ü ë¥† ë¥° ë¥¢ ë¥£ ë¥§ ë¥• ë¥¶ ë¥ß ë¥® ë¥© ë¥™ ë¥´ ë¥¨"),
        (Modi, "ëòé ëòè ëòê ëòë ëòí ëòì ëòî ëòï ëòñ ëòó ëòò ëòô ëòö ëòõ ëòú ëòù ëòû ëòü ëò† ëò° ëò¢ ëò£ ëò§ ëò• ëò¶ ëòß ëò® ëò© ëò™ ëò´ ëò¨ ëò≠ ëòÆ"),
        (Nandinagari, "ë¶Æ ë¶Ø ë¶∞ ë¶± ë¶≤ ë¶≥ ë¶¥ ë¶µ ë¶∂ ë¶∑ ë¶∏ ë¶π ë¶∫ ë¶ª ë¶º ë¶Ω ë¶æ ë¶ø ëßÄ ëßÅ ëßÇ ëßÉ ëßÑ ëßÖ ëßÜ ëßá ëßà ëßâ ëßä ëßã ëßå ëßç ëßé"),
        (Newa, "ëêé ëêè ëêê ëêë ëêí ëêî ëêï ëêñ ëêó ëêò ëêö ëêõ ëêú ëêù ëêû ëêü ëê† ëê° ëê¢ ëê£ ëê• ëê¶ ëêß ëê® ëê© ëê´ ëê¨ ëêÆ ëê∞ ëê± ëê≤ ëê≥ ëê¥"),
        (Odia, "‡¨ï ‡¨ñ ‡¨ó ‡¨ò ‡¨ô ‡¨ö ‡¨õ ‡¨ú ‡¨ù ‡¨û ‡¨ü ‡¨† ‡¨° ‡¨¢ ‡¨£ ‡¨§ ‡¨• ‡¨¶ ‡¨ß ‡¨® ‡¨™ ‡¨´ ‡¨¨ ‡¨≠ ‡¨Æ ‡¨Ø ‡¨∞ ‡¨≤ ‡¨µ ‡¨∂ ‡¨∑ ‡¨∏ ‡¨π"),
        (Saurashtra, "Í¢í Í¢ì Í¢î Í¢ï Í¢ñ Í¢ó Í¢ò Í¢ô Í¢ö Í¢õ Í¢ú Í¢ù Í¢û Í¢ü Í¢† Í¢° Í¢¢ Í¢£ Í¢§ Í¢• Í¢¶ Í¢ß Í¢® Í¢© Í¢™ Í¢´ Í¢¨ Í¢≠ Í¢Æ Í¢Ø Í¢∞ Í¢± Í¢≤"),
        (Sharada, "ëÜë ëÜí ëÜì ëÜî ëÜï ëÜñ ëÜó ëÜò ëÜô ëÜö ëÜõ ëÜú ëÜù ëÜû ëÜü ëÜ† ëÜ° ëÜ¢ ëÜ£ ëÜ§ ëÜ• ëÜ¶ ëÜß ëÜ® ëÜ© ëÜ™ ëÜ´ ëÜ¨ ëÜÆ ëÜØ ëÜ∞ ëÜ± ëÜ≤"),
        (Siddham, "ëñé ëñè ëñê ëñë ëñí ëñì ëñî ëñï ëññ ëñó ëñò ëñô ëñö ëñõ ëñú ëñù ëñû ëñü ëñ† ëñ° ëñ¢ ëñ£ ëñ§ ëñ• ëñ¶ ëñß ëñ® ëñ© ëñ™ ëñ´ ëñ¨ ëñ≠ ëñÆ"),
        (Sinhala, "‡∂ö ‡∂õ ‡∂ú ‡∂ù ‡∂û ‡∂† ‡∂° ‡∂¢ ‡∂£ ‡∂§ ‡∂ß ‡∂® ‡∂© ‡∂™ ‡∂´ ‡∂≠ ‡∂Æ ‡∂Ø ‡∂∞ ‡∂± ‡∂¥ ‡∂µ ‡∂∂ ‡∂∑ ‡∂∏ ‡∂∫ ‡∂ª ‡∂Ω ‡∑Ä ‡∑Å ‡∑Ç ‡∑É ‡∑Ñ"),
        (TaiTham, "·®† ·®° ·®£ ·®• ·®¶ ·®ß ·®® ·®© ·®´ ·®¨ ·®≠ ·®Æ ·®Ø ·®∞ ·®± ·®≤ ·®≥ ·®¥ ·®µ ·®∂ ·®∏ ·®π ·®ª ·®Ω ·®æ ·®ø ·©Å ·©É ·©Ö ·©Ü ·©á ·©à ·©â"),
        (Takri, "ëöä ëö∏ ëöå ëöç ëöé ëöè ëöê ëöë ëöí ëöì ëöî ëöï ëöñ ëöó ëöò ëöô ëöö ëöõ ëöú ëöù ëöû ëöü ëö† ëö° ëö¢ ëö£ ëö§ ëö• ëö¶ ëöß ëöã ëö® ëö©"),
        (Tamil, "‡Æï ‡Æï¬≤ ‡Æï¬≥ ‡Æï‚Å¥ ‡Æô ‡Æö ‡Æö¬≤ ‡Æú ‡Æú¬≤ ‡Æû ‡Æü ‡Æü¬≤ ‡Æü¬≥ ‡Æü‚Å¥ ‡Æ£ ‡Æ§ ‡Æ§¬≤ ‡Æ§¬≥ ‡Æ§‚Å¥ ‡Æ® ‡Æ™ ‡Æ™¬≤ ‡Æ™¬≥ ‡Æ™‚Å¥ ‡ÆÆ ‡ÆØ ‡Æ∞ ‡Æ≤ ‡Æµ ‡Æ∂ ‡Æ∑ ‡Æ∏ ‡Æπ"),
        (Telugu, "‡∞ï ‡∞ñ ‡∞ó ‡∞ò ‡∞ô ‡∞ö ‡∞õ ‡∞ú ‡∞ù ‡∞û ‡∞ü ‡∞† ‡∞° ‡∞¢ ‡∞£ ‡∞§ ‡∞• ‡∞¶ ‡∞ß ‡∞® ‡∞™ ‡∞´ ‡∞¨ ‡∞≠ ‡∞Æ ‡∞Ø ‡∞∞ ‡∞≤ ‡∞µ ‡∞∂ ‡∞∑ ‡∞∏ ‡∞π"),
        (Thai, "‡∏Å ‡∏Ç ‡∏Ñ ‡∏Ü ‡∏á ‡∏à ‡∏â ‡∏ä ‡∏å ‡∏ç ‡∏è ‡∏ê ‡∏ë ‡∏í ‡∏ì ‡∏ï ‡∏ñ ‡∏ó ‡∏ò ‡∏ô ‡∏õ ‡∏ú ‡∏û ‡∏† ‡∏° ‡∏¢ ‡∏£ ‡∏• ‡∏ß ‡∏® ‡∏© ‡∏™ ‡∏´"),
        (Tirhuta, "ëíè ëíê ëíë ëíí ëíì ëíî ëíï ëíñ ëíó ëíò ëíô ëíö ëíõ ëíú ëíù ëíû ëíü ëí† ëí° ëí¢ ëí£ ëí§ ëí• ëí¶ ëíß ëí® ëí© ëí™ ëí´ ëí¨ ëí≠ ëíÆ ëíØ"),
        (ZanabazarSquare, "ë®ã ë®å ë®ç ë®é ë®è ë®£ ë®§ ë®• ë®¶ ë®ì ë®î ë®ï ë®ñ ë®ó ë®ò ë®ô ë®ö ë®õ ë®ú ë®ù ë®û ë®ü ë®† ë®° ë®¢ ë®™ ë®´ ë®¨ ë®≠ ë®Æ ë®Ø ë®∞ ë®±"),
    ]);

    // No distinction between ba / va
    assert_one_way_pairwise(
        (Slp1, slp1),
        &[
            (
                Bengali,
                "‡¶ï ‡¶ñ ‡¶ó ‡¶ò ‡¶ô ‡¶ö ‡¶õ ‡¶ú ‡¶ù ‡¶û ‡¶ü ‡¶† ‡¶° ‡¶¢ ‡¶£ ‡¶§ ‡¶• ‡¶¶ ‡¶ß ‡¶® ‡¶™ ‡¶´ ‡¶¨ ‡¶≠ ‡¶Æ ‡¶Ø ‡¶∞ ‡¶≤ ‡¶¨ ‡¶∂ ‡¶∑ ‡¶∏ ‡¶π",
            ),
            (
                Tibetan,
                "‡ΩÄ‡ºã‡ΩÅ‡ºã‡ΩÇ‡ºã‡ΩÇ‡æ∑‡ºã‡ΩÑ‡ºã‡Ωô‡ºã‡Ωö‡ºã‡Ωõ‡ºã‡Ωõ‡æ∑‡ºã‡Ωâ‡ºã‡Ωä‡ºã‡Ωã‡ºã‡Ωå‡ºã‡Ωå‡æ∑‡ºã‡Ωé‡ºã‡Ωè‡ºã‡Ωê‡ºã‡Ωë‡ºã‡Ωë‡æ∑‡ºã‡Ωì‡ºã‡Ωî‡ºã‡Ωï‡ºã‡Ωñ‡ºã‡Ωñ‡æ∑‡ºã‡Ωò‡ºã‡Ω°‡ºã‡Ω¢‡ºã‡Ω£‡ºã‡Ωñ‡ºã‡Ω§‡ºã‡Ω•‡ºã‡Ω¶‡ºã‡Ωß",
            ),
        ],
    );

    // No distinction between ca/cha and others.
    assert_transliterate(
        slp1,
        Slp1,
        MeeteiMayek,
        "ÍØÄ ÍØà ÍØí ÍØò ÍØâ ÍØÜ ÍØÜ ÍØñ ÍØì ÍØÖ ÍØá ÍØä ÍØó ÍØô ÍØÖ ÍØá ÍØä ÍØó ÍØô ÍØÖ ÍØÑ ÍØê ÍØï ÍØö ÍØÉ ÍØå ÍØî ÍØÇ ÍØã ÍØÅ ÍØÅ ÍØÅ ÍØç",
    );

    // No distinction between sa-s.
    assert_transliterate(
        slp1,
        Slp1,
        OlChiki,
        concat!(
            "·±†·±ö ·±†·±∑·±ö ·±ú·±ö ·±ú·±∑·±ö ·±∂·±ö ·±™·±ö ·±™·±∑·±ö ·±°·±ö ·±°·±∑·±ö ·±ß·±ö ·±¥·±ö ·±¥·±∑·±ö ·±∞·±ö ·±∞·±∑·±ö ·±¨·±ö ",
            "·±õ·±ö ·±õ·±∑·±ö ·±´·±ö ·±´·±∑·±ö ·±±·±ö ·±Ø·±ö ·±Ø·±∑·±ö ·±µ·±ö ·±µ·±∑·±ö ·±¢·±ö ·±≠·±ö ·±®·±ö ·±û·±ö ·±£·±ö ·±•·±ö ·±•·±ö ·±•·±ö ·±¶·±ö"
        ),
    );

    // Missing two na-s and two sa-s
    assert_one_way_pairwise(
        (Slp1, slp1),
        &[(
            GunjalaGondi,
            "ëµ± ëµ≤ ëµ∂ ëµ∑ ë∂Ñ ëµª ëµº ë∂Ä ë∂Å ëµ∫ ëµΩ ëµæ ë∂Ç ë∂É ëµ∫ ëµ≥ ëµ¥ ëµ∏ ëµπ ëµ∫ ë∂Ö ë∂Ü ëµÆ ëµØ ëµ∞ ëµ¨ ë∂à ëµµ ëµ≠ ë∂â ë∂â ë∂â ë∂á",
        )],
    );

    // No distinction between Ta / ta
    assert_one_way_pairwise(
        (Slp1, slp1),
        &[
        // (Cham, "Í®Ü Í®á Í®à Í®â Í®ã Í®å Í®ç Í®é Í®è Í®ë Í®ì Í®î Í®ï Í®ñ Í®ò Í®ì Í®î Í®ï Í®ñ Í®ò Í®ö Í®ú Í®ù Í®û Í®† Í®¢ Í®£ Í®§ Í®• Í®¶ Í®¶ Í®ß Í®®"),
        ],
    );
}

#[test]
fn sanskrit_symbols() {
    assert_two_way_pairwise(&[
        (HarvardKyoto, "0 1 2 3 4 5 6 7 8 9 . .. '"),
        (Iast, "0 1 2 3 4 5 6 7 8 9 . .. '"),
        (Itrans, "0 1 2 3 4 5 6 7 8 9 | || .a"),
        (Slp1, "0 1 2 3 4 5 6 7 8 9 . .. '"),
        (Velthuis, "0 1 2 3 4 5 6 7 8 9 | || .a"),
        (Wx, "0 1 2 3 4 5 6 7 8 9 . .. Z"),
        // Indic
        (Bengali, "‡ß¶ ‡ßß ‡ß® ‡ß© ‡ß™ ‡ß´ ‡ß¨ ‡ß≠ ‡ßÆ ‡ßØ ‡•§ ‡•• ‡¶Ω"),
        (Bhaiksuki, "ë±êë±Éë±ëë±Éë±íë±Éë±ìë±Éë±îë±Éë±ïë±Éë±ñë±Éë±óë±Éë±òë±Éë±ôë±Éë±Åë±Éë±Çë±Éë±Ä"),
        // (Cham, "Í©ê Í©ë Í©í Í©ì Í©î Í©ï Í©ñ Í©ó Í©ò Í©ô Í©ù Í©û '"),
        (Devanagari, "‡•¶ ‡•ß ‡•® ‡•© ‡•™ ‡•´ ‡•¨ ‡•≠ ‡•Æ ‡•Ø ‡•§ ‡•• ‡§Ω"),
        (Dogra, "‡•¶ ‡•ß ‡•® ‡•© ‡•™ ‡•´ ‡•¨ ‡•≠ ‡•Æ ‡•Ø ‡•§ ‡•• ‡§Ω"),
        (Grantha, "‡Ø¶ ‡Øß ‡Ø® ‡Ø© ‡Ø™ ‡Ø´ ‡Ø¨ ‡Ø≠ ‡ØÆ ‡ØØ ‡•§ ‡•• ëåΩ"),
        // TODO: confirm correct behavior of Gunjala Gondi avagraha.
        (GunjalaGondi, "ë∂† ë∂° ë∂¢ ë∂£ ë∂§ ë∂• ë∂¶ ë∂ß ë∂® ë∂© . .. ‡§Ω"),
        (Gujarati, "‡´¶ ‡´ß ‡´® ‡´© ‡´™ ‡´´ ‡´¨ ‡´≠ ‡´Æ ‡´Ø ‡•§ ‡•• ‡™Ω"),
        (Gurmukhi, "‡©¶ ‡©ß ‡©® ‡©© ‡©™ ‡©´ ‡©¨ ‡©≠ ‡©Æ ‡©Ø ‡•§ ‡•• ‡§Ω"),
        (Kaithi, "‡•¶ ‡•ß ‡•® ‡•© ‡•™ ‡•´ ‡•¨ ‡•≠ ‡•Æ ‡•Ø ëÉÄ ëÉÅ ‡§Ω"),
        (Kannada, "‡≥¶ ‡≥ß ‡≥® ‡≥© ‡≥™ ‡≥´ ‡≥¨ ‡≥≠ ‡≥Æ ‡≥Ø ‡•§ ‡•• ‡≤Ω"),
        (Khmer, "·ü† ·ü° ·ü¢ ·ü£ ·ü§ ·ü• ·ü¶ ·üß ·ü® ·ü© ·üî ·üï ·üú"),
        (Khudawadi, "ëã∞ ëã± ëã≤ ëã≥ ëã¥ ëãµ ëã∂ ëã∑ ëã∏ ëãπ ‡•§ ‡•• ‡§Ω"),
        (Malayalam, "‡µ¶ ‡µß ‡µ® ‡µ© ‡µ™ ‡µ´ ‡µ¨ ‡µ≠ ‡µÆ ‡µØ ‡•§ ‡•• ‡¥Ω"),
        (MasaramGondi, "ëµê ëµë ëµí ëµì ëµî ëµï ëµñ ëµó ëµò ëµô ‡•§ ‡•• ‡§Ω"),
        (Modi, "ëôê ëôë ëôí ëôì ëôî ëôï ëôñ ëôó ëôò ëôô ëôÅ ëôÇ ‡§Ω"),
        (Nandinagari, "‡≥¶ ‡≥ß ‡≥® ‡≥© ‡≥™ ‡≥´ ‡≥¨ ‡≥≠ ‡≥Æ ‡≥Ø ‡•§ ‡•• ëß°"),
        (Newa, "ëëê ëëë ëëí ëëì ëëî ëëï ëëñ ëëó ëëò ëëô ëëã ëëå ëëá"),
        (Odia, "‡≠¶ ‡≠ß ‡≠® ‡≠© ‡≠™ ‡≠´ ‡≠¨ ‡≠≠ ‡≠Æ ‡≠Ø ‡•§ ‡•• ‡¨Ω"),
        (OlChiki, "·±ê ·±ë ·±í ·±ì ·±î ·±ï ·±ñ ·±ó ·±ò ·±ô ·±æ ·±ø '"),
        (Saurashtra, "Í£ê Í£ë Í£í Í£ì Í£î Í£ï Í£ñ Í£ó Í£ò Í£ô Í£é Í£è ‡∞Ω"),
        (TaiTham, "·™ê ·™ë ·™í ·™ì ·™î ·™ï ·™ñ ·™ó ·™ò ·™ô ·™® ·™© '"),
        (Takri, "ëõÄ ëõÅ ëõÇ ëõÉ ëõÑ ëõÖ ëõÜ ëõá ëõà ëõâ ‡•§ ‡•• ‡§Ω"),
        (Telugu, "‡±¶ ‡±ß ‡±® ‡±© ‡±™ ‡±´ ‡±¨ ‡±≠ ‡±Æ ‡±Ø ‡•§ ‡•• ‡∞Ω"),
        (Thai, "‡πê ‡πë ‡πí ‡πì ‡πî ‡πï ‡πñ ‡πó ‡πò ‡πô ‡∏Ø ‡πö '"),
        (Tibetan, "‡º†‡ºã‡º°‡ºã‡º¢‡ºã‡º£‡ºã‡º§‡ºã‡º•‡ºã‡º¶‡ºã‡ºß‡ºã‡º®‡ºã‡º©‡ºã‡ºç‡ºã‡ºé‡ºã‡æÖ"),
        (Tirhuta, "ëìê ëìë ëìí ëìì ëìî ëìï ëìñ ëìó ëìò ëìô ‡•§ ‡•• ëìÑ"),
    ]);

    // Only dandas
    assert_two_way_pairwise(&[(Slp1, ". .."), (ZanabazarSquare, "ë©Ç ë©É")]);
}

#[test]
fn sanskrit_basic_sentences() {
    let slp1_text = concat!(
        "nArAyaRaM namaskftya naraM cEva narottamam . ",
        "devIM sarasvatIM cEva tato jayamudIrayet .. 1 .."
    );
    assert_two_way_pairwise(&[
        (BarahaSouth, "nArAyaNaM namaskRutya naraM chaiva narOttamam | dEvIM sarasvatIM chaiva tatO jayamudIrayEt || 1 ||",),
        (HarvardKyoto, "nArAyaNaM namaskRtya naraM caiva narottamam . devIM sarasvatIM caiva tato jayamudIrayet .. 1 ..",),
        (Iast, "nƒÅrƒÅya·πáa·πÉ namask·πõtya nara·πÉ caiva narottamam . devƒ´·πÉ sarasvatƒ´·πÉ caiva tato jayamudƒ´rayet .. 1 .."),
        (Iso15919, "nƒÅrƒÅya·πáa·πÅ namaskrÃ•tya nara·πÅ caiva nar≈çttamam . dƒìvƒ´·πÅ sarasvatƒ´·πÅ caiva tat≈ç jayamudƒ´rayƒìt .. 1 .."),
        (Itrans, "nArAyaNaM namaskRRitya naraM chaiva narottamam | devIM sarasvatIM chaiva tato jayamudIrayet || 1 ||"),
        (Slp1, slp1_text),
        (Velthuis, "naaraaya.na.m namask.rtya nara.m caiva narottamam | devii.m sarasvatii.m caiva tato jayamudiirayet || 1 ||"),
        (Wx, "nArAyaNaM namaskqwya naraM cEva narowwamam . xevIM sarasvawIM cEva wawo jayamuxIrayew .. 1 .."),
        // Indic
        (Balinese, "·¨¶·¨µ·¨≠·¨µ·¨¨·¨°·¨Ç ·¨¶·¨´·¨≤·≠Ñ·¨ì·¨∫·¨¢·≠Ñ·¨¨ ·¨¶·¨≠·¨Ç ·¨ò·¨ø·¨Ø ·¨¶·¨≠·≠Ä·¨¢·≠Ñ·¨¢·¨´·¨´·≠Ñ ·≠û ·¨§·¨æ·¨Ø·¨∑·¨Ç ·¨≤·¨≠·¨≤·≠Ñ·¨Ø·¨¢·¨∑·¨Ç ·¨ò·¨ø·¨Ø ·¨¢·¨¢·≠Ä ·¨ö·¨¨·¨´·¨∏·¨§·¨∑·¨≠·¨¨·¨æ·¨¢·≠Ñ ·≠ü ·≠ë ·≠ü"),
        (Bhaiksuki, "ë∞°ë∞Øë∞®ë∞Øë∞ßë∞úë∞Ωë±Éë∞°ë∞¶ë∞≠ë∞øë∞éë∞¥ë∞ùë∞øë∞ßë±Éë∞°ë∞®ë∞Ωë±Éë∞ìë∞πë∞™ë±Éë∞°ë∞®ë∞∫ë∞ùë∞øë∞ùë∞¶ë∞¶ë∞øë±Éë±Åë±Éë∞üë∞∏ë∞™ë∞±ë∞Ωë±Éë∞≠ë∞®ë∞≠ë∞øë∞™ë∞ùë∞±ë∞Ωë±Éë∞ìë∞πë∞™ë±Éë∞ùë∞ùë∞∫ë±Éë∞ïë∞ßë∞¶ë∞≤ë∞üë∞±ë∞®ë∞ßë∞∏ë∞ùë∞øë±Éë±Çë±Éë±ëë±Éë±Ç"),
        (Brahmi, "ëÄ¶ëÄ∏ëÄ≠ëÄ∏ëÄ¨ëÄ°ëÄÅ ëÄ¶ëÄ´ëÄ≤ëÅÜëÄìëÄæëÄ¢ëÅÜëÄ¨ ëÄ¶ëÄ≠ëÄÅ ëÄòëÅÉëÄØ ëÄ¶ëÄ≠ëÅÑëÄ¢ëÅÜëÄ¢ëÄ´ëÄ´ëÅÜ ëÅá ëÄ§ëÅÇëÄØëÄªëÄÅ ëÄ≤ëÄ≠ëÄ≤ëÅÜëÄØëÄ¢ëÄªëÄÅ ëÄòëÅÉëÄØ ëÄ¢ëÄ¢ëÅÑ ëÄöëÄ¨ëÄ´ëÄºëÄ§ëÄªëÄ≠ëÄ¨ëÅÇëÄ¢ëÅÜ ëÅà ëÅß ëÅà"),
        (Devanagari, "‡§®‡§æ‡§∞‡§æ‡§Ø‡§£‡§Ç ‡§®‡§Æ‡§∏‡•ç‡§ï‡•É‡§§‡•ç‡§Ø ‡§®‡§∞‡§Ç ‡§ö‡•à‡§µ ‡§®‡§∞‡•ã‡§§‡•ç‡§§‡§Æ‡§Æ‡•ç ‡•§ ‡§¶‡•á‡§µ‡•Ä‡§Ç ‡§∏‡§∞‡§∏‡•ç‡§µ‡§§‡•Ä‡§Ç ‡§ö‡•à‡§µ ‡§§‡§§‡•ã ‡§ú‡§Ø‡§Æ‡•Å‡§¶‡•Ä‡§∞‡§Ø‡•á‡§§‡•ç ‡•• ‡•ß ‡••"),
        (Dogra, "ë†ùë†¨ë†§ë†¨ë†£ë†òë†∑ ë†ùë†¢ë†©ë†πë†äë†±ë†ôë†πë†£ ë†ùë†§ë†∑ ë†èë†¥ë†¶ ë†ùë†§ë†µë†ôë†πë†ôë†¢ë†¢ë†π ‡•§ ë†õë†≥ë†¶ë†Æë†∑ ë†©ë†§ë†©ë†πë†¶ë†ôë†Æë†∑ ë†èë†¥ë†¶ ë†ôë†ôë†µ ë†ëë†£ë†¢ë†Øë†õë†Æë†§ë†£ë†≥ë†ôë†π ‡•• ‡•ß ‡••"),
        (Grantha, "ëå®ëåæëå∞ëåæëåØëå£ëåÇ ëå®ëåÆëå∏ëççëåïëçÉëå§ëççëåØ ëå®ëå∞ëåÇ ëåöëçàëåµ ëå®ëå∞ëçãëå§ëççëå§ëåÆëåÆëçç ‡•§ ëå¶ëçáëåµëçÄëåÇ ëå∏ëå∞ëå∏ëççëåµëå§ëçÄëåÇ ëåöëçàëåµ ëå§ëå§ëçã ëåúëåØëåÆëçÅëå¶ëçÄëå∞ëåØëçáëå§ëçç ‡•• ‡Øß ‡••"),
        (Gujarati, "‡™®‡™æ‡™∞‡™æ‡™Ø‡™£‡™Ç ‡™®‡™Æ‡™∏‡´ç‡™ï‡´É‡™§‡´ç‡™Ø ‡™®‡™∞‡™Ç ‡™ö‡´à‡™µ ‡™®‡™∞‡´ã‡™§‡´ç‡™§‡™Æ‡™Æ‡´ç ‡•§ ‡™¶‡´á‡™µ‡´Ä‡™Ç ‡™∏‡™∞‡™∏‡´ç‡™µ‡™§‡´Ä‡™Ç ‡™ö‡´à‡™µ ‡™§‡™§‡´ã ‡™ú‡™Ø‡™Æ‡´Å‡™¶‡´Ä‡™∞‡™Ø‡´á‡™§‡´ç ‡•• ‡´ß ‡••"),
        (Kaithi, "ëÇ¢ëÇ∞ëÇ©ëÇ∞ëÇ®ëÇùëÇÅ ëÇ¢ëÇßëÇÆëÇπëÇçëÇπëÇ©ëÇ±ëÇûëÇπëÇ® ëÇ¢ëÇ©ëÇÅ ëÇíëÇ∂ëÇ´ ëÇ¢ëÇ©ëÇ∑ëÇûëÇπëÇûëÇßëÇßëÇπ ëÉÄ ëÇ†ëÇµëÇ´ëÇ≤ëÇÅ ëÇÆëÇ©ëÇÆëÇπëÇ´ëÇûëÇ≤ëÇÅ ëÇíëÇ∂ëÇ´ ëÇûëÇûëÇ∑ ëÇîëÇ®ëÇßëÇ≥ëÇ†ëÇ≤ëÇ©ëÇ®ëÇµëÇûëÇπ ëÉÅ ‡•ß ëÉÅ"),
        (Kannada, "‡≤®‡≤æ‡≤∞‡≤æ‡≤Ø‡≤£‡≤Ç ‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≥É‡≤§‡≥ç‡≤Ø ‡≤®‡≤∞‡≤Ç ‡≤ö‡≥à‡≤µ ‡≤®‡≤∞‡≥ã‡≤§‡≥ç‡≤§‡≤Æ‡≤Æ‡≥ç ‡•§ ‡≤¶‡≥á‡≤µ‡≥Ä‡≤Ç ‡≤∏‡≤∞‡≤∏‡≥ç‡≤µ‡≤§‡≥Ä‡≤Ç ‡≤ö‡≥à‡≤µ ‡≤§‡≤§‡≥ã ‡≤ú‡≤Ø‡≤Æ‡≥Å‡≤¶‡≥Ä‡≤∞‡≤Ø‡≥á‡≤§‡≥ç ‡•• ‡≥ß ‡••"),
        (Khmer, "·ûì·û∂·ûö·û∂·ûô·ûé·üÜ ·ûì·ûò·ûü·üí·ûÄ·üí·û´·ûè·üí·ûô ·ûì·ûö·üÜ ·ûÖ·üÉ·ûú ·ûì·ûö·üÑ·ûè·üí·ûè·ûò·ûò·üë ·üî ·ûë·üÅ·ûú·û∏·üÜ ·ûü·ûö·ûü·üí·ûú·ûè·û∏·üÜ ·ûÖ·üÉ·ûú ·ûè·ûè·üÑ ·ûá·ûô·ûò·ûª·ûë·û∏·ûö·ûô·üÅ·ûè·üë ·üï ·ü° ·üï"),
        (Khudawadi, "ëãëëã†ëãôëã†ëãòëãåëãü ëãëëãóëãùëã™ëä∫ëã™ëãôëã°ëãçëã™ëãò ëãëëãôëãü ëãÄëã¶ëãõ ëãëëãôëãßëãçëã™ëãçëãóëãóëã™ ‡•§ ëãèëã•ëãõëã¢ëãü ëãùëãôëãùëã™ëãõëãçëã¢ëãü ëãÄëã¶ëãõ ëãçëãçëãß ëãÇëãòëãóëã£ëãèëã¢ëãôëãòëã•ëãçëã™ ‡•• ëã± ‡••"),
        (Malayalam, "‡¥®‡¥æ‡¥∞‡¥æ‡¥Ø‡¥£‡¥Ç ‡¥®‡¥Æ‡¥∏‡µç‡¥ï‡µÉ‡¥§‡µç‡¥Ø ‡¥®‡¥∞‡¥Ç ‡¥ö‡µà‡¥µ ‡¥®‡¥∞‡µã‡¥§‡µç‡¥§‡¥Æ‡¥Æ‡µç ‡•§ ‡¥¶‡µá‡¥µ‡µÄ‡¥Ç ‡¥∏‡¥∞‡¥∏‡µç‡¥µ‡¥§‡µÄ‡¥Ç ‡¥ö‡µà‡¥µ ‡¥§‡¥§‡µã ‡¥ú‡¥Ø‡¥Æ‡µÅ‡¥¶‡µÄ‡¥∞‡¥Ø‡µá‡¥§‡µç ‡•• ‡µß ‡••"),
        (MasaramGondi, "ë¥üë¥±ë¥¶ë¥±ë¥•ë¥öëµÄ ë¥üë¥§ë¥´ëµÖë¥åë¥∂ë¥õëµÖë¥• ë¥üë¥¶ëµÄ ë¥ëë¥ºë¥® ë¥üë¥¶ë¥Ωë¥õëµÖë¥õë¥§ë¥§ëµÑ ‡•§ ë¥ùë¥∫ë¥®ë¥≥ëµÄ ë¥´ë¥¶ë¥´ëµÖë¥®ë¥õë¥≥ëµÄ ë¥ëë¥ºë¥® ë¥õë¥õë¥Ω ë¥ìë¥•ë¥§ë¥¥ë¥ùë¥≥ë¥¶ë¥•ë¥∫ë¥õëµÑ ‡•• ëµë ‡••"),
        (Modi, "ëò°ëò∞ëò®ëò∞ëòßëòúëòΩ ëò°ëò¶ëò≠ëòøëòéëòµëòùëòøëòß ëò°ëò®ëòΩ ëòìëò∫ëò™ ëò°ëò®ëòªëòùëòøëòùëò¶ëò¶ëòø ëôÅ ëòüëòπëò™ëò≤ëòΩ ëò≠ëò®ëò≠ëòøëò™ëòùëò≤ëòΩ ëòìëò∫ëò™ ëòùëòùëòª ëòïëòßëò¶ëò≥ëòüëò≤ëò®ëòßëòπëòùëòø ëôÇ ëôë ëôÇ"),
        (Nandinagari, "ëßÅëßëëßàëßëëßáë¶ºëßû ëßÅëßÜëßçëß†ë¶Æëßñë¶Ωëß†ëßá ëßÅëßàëßû ë¶≥ëßõëßä ëßÅëßàëßúë¶Ωëß†ë¶ΩëßÜëßÜëß† ‡•§ ë¶øëßöëßäëßìëßû ëßçëßàëßçëß†ëßäë¶Ωëßìëßû ë¶≥ëßõëßä ë¶Ωë¶Ωëßú ë¶µëßáëßÜëßîë¶øëßìëßàëßáëßöë¶Ωëß† ‡•• ‡≥ß ‡••"),
        (Newa, "ëê£ëêµëê¨ëêµëê´ëêûëëÑ ëê£ëê©ëê≥ëëÇëêéëê∫ëêüëëÇëê´ ëê£ëê¨ëëÑ ëêîëêøëê∞ ëê£ëê¨ëëÄëêüëëÇëêüëê©ëê©ëëÇ ëëã ëê°ëêæëê∞ëê∑ëëÑ ëê≥ëê¨ëê≥ëëÇëê∞ëêüëê∑ëëÑ ëêîëêøëê∞ ëêüëêüëëÄ ëêñëê´ëê©ëê∏ëê°ëê∑ëê¨ëê´ëêæëêüëëÇ ëëå ëëë ëëå"),
        (Odia, "‡¨®‡¨æ‡¨∞‡¨æ‡¨Ø‡¨£‡¨Ç ‡¨®‡¨Æ‡¨∏‡≠ç‡¨ï‡≠É‡¨§‡≠ç‡¨Ø ‡¨®‡¨∞‡¨Ç ‡¨ö‡≠à‡¨µ ‡¨®‡¨∞‡≠ã‡¨§‡≠ç‡¨§‡¨Æ‡¨Æ‡≠ç ‡•§ ‡¨¶‡≠á‡¨µ‡≠Ä‡¨Ç ‡¨∏‡¨∞‡¨∏‡≠ç‡¨µ‡¨§‡≠Ä‡¨Ç ‡¨ö‡≠à‡¨µ ‡¨§‡¨§‡≠ã ‡¨ú‡¨Ø‡¨Æ‡≠Å‡¨¶‡≠Ä‡¨∞‡¨Ø‡≠á‡¨§‡≠ç ‡•• ‡≠ß ‡••"),
        (Saurashtra, "Í¢•Í¢µÍ¢¨Í¢µÍ¢´Í¢†Í¢Ä Í¢•Í¢™Í¢±Í£ÑÍ¢íÍ¢∫Í¢°Í£ÑÍ¢´ Í¢•Í¢¨Í¢Ä Í¢óÍ£ÄÍ¢Æ Í¢•Í¢¨Í£ÇÍ¢°Í£ÑÍ¢°Í¢™Í¢™Í£Ñ Í£é Í¢£Í¢øÍ¢ÆÍ¢∑Í¢Ä Í¢±Í¢¨Í¢±Í£ÑÍ¢ÆÍ¢°Í¢∑Í¢Ä Í¢óÍ£ÄÍ¢Æ Í¢°Í¢°Í£Ç Í¢ôÍ¢´Í¢™Í¢∏Í¢£Í¢∑Í¢¨Í¢´Í¢øÍ¢°Í£Ñ Í£è Í£ë Í£è"),
        (Sharada, "ëÜ§ëÜ≥ëÜ´ëÜ≥ëÜ™ëÜüëÜÅ ëÜ§ëÜ©ëÜ±ëáÄëÜëëÜ∏ëÜ†ëáÄëÜ™ ëÜ§ëÜ´ëÜÅ ëÜñëÜΩëÜÆ ëÜ§ëÜ´ëÜæëÜ†ëáÄëÜ†ëÜ©ëÜ©ëáÄ ëáÖ ëÜ¢ëÜºëÜÆëÜµëÜÅ ëÜ±ëÜ´ëÜ±ëáÄëÜÆëÜ†ëÜµëÜÅ ëÜñëÜΩëÜÆ ëÜ†ëÜ†ëÜæ ëÜòëÜ™ëÜ©ëÜ∂ëÜ¢ëÜµëÜ´ëÜ™ëÜºëÜ†ëáÄ ëáÜ ëáë ëáÜ"),
        (Siddham, "ëñ°ëñØëñ®ëñØëñßëñúëñΩ ëñ°ëñ¶ëñ≠ëñøëñéëñ¥ëñùëñøëñß ëñ°ëñ®ëñΩ ëñìëñπëñ™ ëñ°ëñ®ëñ∫ëñùëñøëñùëñ¶ëñ¶ëñø ëóÇ ëñüëñ∏ëñ™ëñ±ëñΩ ëñ≠ëñ®ëñ≠ëñøëñ™ëñùëñ±ëñΩ ëñìëñπëñ™ ëñùëñùëñ∫ ëñïëñßëñ¶ëñ≤ëñüëñ±ëñ®ëñßëñ∏ëñùëñø ëóÉ 1 ëóÉ"),
        // (TaiTham, "·®∂·©£·©Å·©£·®ø·®±·©¥ ·®∂·®æ·©à·©†·®†·©∫·©Ç·®≤·©†·®ø ·®∂·©Å·©¥ ·®ß·©±·©Ö ·®∂·©Å·©Æ·©£·®≤·©†·®≤·®æ·®æ·©∫ ·™® ·®¥·©Æ·©Ö·©¶·©¥ ·©à·©Å·©à·©†·©Ö·®≤·©¶·©¥ ·®ß·©±·©Ö ·®≤·®≤·©Æ·©£ ·®©·®ø·®æ·©©·®¥·©¶·©Å·®ø·©Æ·®≤·©∫ ·™© ·™ë ·™©"),
        (Tamil, "‡Æ®‡Ææ‡Æ∞‡Ææ‡ÆØ‡Æ£‡ÆÆ‡Øç º ‡Æ®‡ÆÆ‡Æ∏‡Øç‡Æï‡Øç‡Æ∞‡ØÅ º‡Æ§‡Øç‡ÆØ ‡Æ®‡Æ∞‡ÆÆ‡Øç º ‡Æö‡Øà‡Æµ ‡Æ®‡Æ∞‡Øã‡Æ§‡Øç‡Æ§‡ÆÆ‡ÆÆ‡Øç . ‡Æ§‡Øá¬≥‡Æµ‡ØÄ‡ÆÆ‡Øç º ‡Æ∏‡Æ∞‡Æ∏‡Øç‡Æµ‡Æ§‡ØÄ‡ÆÆ‡Øç º ‡Æö‡Øà‡Æµ ‡Æ§‡Æ§‡Øã ‡Æú‡ÆØ‡ÆÆ‡ØÅ‡Æ§‡ØÄ¬≥‡Æ∞‡ÆØ‡Øá‡Æ§‡Øç .. 1 .."),
        (Telugu, "‡∞®‡∞æ‡∞∞‡∞æ‡∞Ø‡∞£‡∞Ç ‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡±É‡∞§‡±ç‡∞Ø ‡∞®‡∞∞‡∞Ç ‡∞ö‡±à‡∞µ ‡∞®‡∞∞‡±ã‡∞§‡±ç‡∞§‡∞Æ‡∞Æ‡±ç ‡•§ ‡∞¶‡±á‡∞µ‡±Ä‡∞Ç ‡∞∏‡∞∞‡∞∏‡±ç‡∞µ‡∞§‡±Ä‡∞Ç ‡∞ö‡±à‡∞µ ‡∞§‡∞§‡±ã ‡∞ú‡∞Ø‡∞Æ‡±Å‡∞¶‡±Ä‡∞∞‡∞Ø‡±á‡∞§‡±ç ‡•• ‡±ß ‡••"),
        (Thai, "‡∏ô‡∏≤‡∏£‡∏≤‡∏¢‡∏ì‡πç ‡∏ô‡∏°‡∏™‡∏∫‡∏Å‡∏∫‡∏§‡∏ï‡∏∫‡∏¢ ‡∏ô‡∏£‡πç ‡πÑ‡∏à‡∏ß ‡∏ô‡πÇ‡∏£‡∏ï‡∏∫‡∏ï‡∏°‡∏°‡∏∫ ‡∏Ø ‡πÄ‡∏ó‡∏ß‡∏µ‡πç ‡∏™‡∏£‡∏™‡∏∫‡∏ß‡∏ï‡∏µ‡πç ‡πÑ‡∏à‡∏ß ‡∏ï‡πÇ‡∏ï ‡∏ä‡∏¢‡∏°‡∏∏‡∏ó‡∏µ‡∏£‡πÄ‡∏¢‡∏ï‡∏∫ ‡πö ‡πë ‡πö"),
        (Tirhuta, "ëí¢ëí∞ëí©ëí∞ëí®ëíùëìÄ ëí¢ëíßëíÆëìÇëíèëíµëíûëìÇëí® ëí¢ëí©ëìÄ ëíîëíªëí´ ëí¢ëí©ëíºëíûëìÇëíûëíßëíßëìÇ ‡•§ ëí†ëíπëí´ëí≤ëìÄ ëíÆëí©ëíÆëìÇëí´ëíûëí≤ëìÄ ëíîëíªëí´ ëíûëíûëíº ëíñëí®ëíßëí≥ëí†ëí≤ëí©ëí®ëíπëíûëìÇ ‡•• ëìë ‡••"),
    ]);

    // Non-reversible due to vocalic r/rr/l/ll.
    assert_one_way_pairwise(
        (Slp1, slp1_text),
        &[
            (
                Takri,
                "ëöùëö≠ëö§ëö≠ëö£ëöòëö´ ëöùëö¢ëö®ëö∂ëöäëö∂ëö§ëöÆëöôëö∂ëö£ ëöùëö§ëö´ ëöèëö≥ëö¶ ëöùëö§ëö¥ëöôëö∂ëöôëö¢ëö¢ëö∂ ‡•§ ëöõëö≤ëö¶ëöØëö´ ëö®ëö§ëö®ëö∂ëö¶ëöôëöØëö´ ëöèëö≥ëö¶ ëöôëöôëö¥ ëöëëö£ëö¢ëö∞ëöõëöØëö§ëö£ëö≤ëöôëö∂ ‡•• ëõÅ ‡••",
            ),
            (
                ZanabazarSquare,
                "ë®ùë®äë®´ë®äë®™ë®òë®∏ ë®ùë®¢ë®∞ë©áë®ãë©áë®´ë®âë®ôë©áë®™ ë®ùë®´ë®∏ ë®£ë®Ñë®äë®≠ ë®ùë®´ë®Üë®ôë©áë®ôë®¢ë®¢ë®¥ ë©Ç ë®õë®Ñë®≠ë®Åë®äë®∏ ë®∞ë®´ë®∞ë©áë®≠ë®ôë®Åë®äë®∏ ë®£ë®Ñë®äë®≠ ë®ôë®ôë®Ü ë®•ë®™ë®¢ë®Çë®õë®Åë®äë®´ë®™ë®Ñë®ôë®¥ ë©É 1 ë©É",
            ),
        ],
    );

    // Non-reversible due to b/v and no virama.
    assert_transliterate(
        slp1_text,
        Slp1,
        Tibetan,
        "‡Ωì‡Ω±‡Ω¢‡Ω±‡Ω°‡Ωé‡Ωæ‡ºã‡Ωì‡Ωò‡Ω¶‡æê‡æ≤‡æÄ‡Ωè‡æ±‡ºã‡Ωì‡Ω¢‡Ωæ‡ºã‡Ωô‡Ωª‡Ωñ‡ºã‡Ωì‡Ω¢‡Ωº‡Ωè‡æü‡Ωò‡Ωò‡ºã‡ºç‡ºã‡Ωë‡Ω∫‡Ωñ‡Ω±‡Ω≤‡Ωæ‡ºã‡Ω¶‡Ω¢‡Ω¶‡æ≠‡Ωè‡Ω±‡Ω≤‡Ωæ‡ºã‡Ωô‡Ωª‡Ωñ‡ºã‡Ωè‡Ωè‡Ωº‡ºã‡Ωõ‡Ω°‡Ωò‡Ω¥‡Ωë‡Ω±‡Ω≤‡Ω¢‡Ω°‡Ω∫‡Ωè‡ºã‡ºé‡ºã‡º°‡ºã‡ºé",
    );

    // Non-reversible due to no "sa" distinctions.
    assert_transliterate(
        slp1_text,
        Slp1,
        OlChiki,
        concat!(
            "·±±·±ü·±®·±ü·±≠·±ö·±¨·±ö·±ù ·±±·±ö·±¢·±ö·±•·±†·±®·±©·±õ·±≠·±ö ·±±·±ö·±®·±ö·±ù ·±™·±ö·±§·±£·±ö ·±±·±ö·±®·±≥·±õ·±õ·±ö·±¢·±ö·±¢ ·±æ ",
            "·±´·±Æ·±£·±§·±ª·±ù ·±•·±ö·±®·±ö·±•·±£·±ö·±õ·±§·±ª·±ù ·±™·±ö·±§·±£·±ö ·±õ·±ö·±õ·±≥ ·±°·±ö·±≠·±ö·±¢·±©·±´·±§·±ª·±®·±ö·±≠·±Æ·±õ ·±ø ·±ë ·±ø"
        ),
    );

    // Non-reversible due to various na-s and sa-s.
    assert_transliterate(
        slp1_text,
        Slp1,
        GunjalaGondi,
        "ëµ∫ë∂äë∂àë∂äëµ¨ëµ∫ë∂ï ëµ∫ëµ∞ë∂âë∂óëµ±ë∂óë∂àë∂çëµ≥ë∂óëµ¨ ëµ∫ë∂àë∂ï ëµªë∂ëëµ≠ ëµ∫ë∂àë∂ìëµ≥ë∂óëµ≥ëµ∞ëµ∞ . ëµ∏ë∂êëµ≠ë∂åë∂ï ë∂âë∂àë∂âë∂óëµ≠ëµ≥ë∂åë∂ï ëµªë∂ëëµ≠ ëµ≥ëµ≥ë∂ì ë∂Äëµ¨ëµ∞ë∂çëµ∏ë∂åë∂àëµ¨ë∂êëµ≥ .. ë∂° ..",
    );
}

// Sanskrit (Vedic)
// ----------------

#[test]
fn sanskrit_vedic_accent() {
    // Svarita and anudatta
    assert_two_way_pairwise(&[
        (BarahaSouth, "aq a#"),
        (Itrans, r"a\_ a\'"),
        (Slp1, r"a\ a^"),
        // Indic
        (Bengali, "‡¶Ö‡•í ‡¶Ö‡•ë"),
        (Devanagari, "‡§Ö‡•í ‡§Ö‡•ë"),
        (Grantha, "ëåÖ‡•í ëåÖ·≥¥"),
        (Kannada, "‡≤Ö‡•í ‡≤Ö‡•ë"),
        (Malayalam, "‡¥Ö‡•í ‡¥Ö‡•ë"),
        (Odia, "‡¨Ö‡•í ‡¨Ö‡•ë"),
        (Sharada, "ëÜÉ‡•í ëÜÉ‡•ë"),
        (Telugu, "‡∞Ö‡•í ‡∞Ö‡•ë"),
    ]);

    // Dirgha svarita
    assert_two_way_pairwise(&[
        (BarahaSouth, "a$"),
        // Indic
        (Bengali, "‡¶Ö·≥ö"),
        (Devanagari, "‡§Ö·≥ö"),
        (Grantha, "ëåÖ‡•ë"),
        (Kannada, "‡≤Ö·≥ö"),
        (Malayalam, "‡¥Ö·≥ö"),
        (Odia, "‡¨Ö·≥ö"),
        (Sharada, "ëÜÉ·≥ö"),
        (Telugu, "‡∞Ö·≥ö"),
    ]);
}

#[test]
fn sanskrit_vedic_consonants() {
    assert_two_way_pairwise(&[
        (BarahaSouth, "La Lha"),
        (HarvardKyoto, "La Lha"),
        (Iast, "·∏ªa ·∏ªha"),
        (Iso15919, "·∏∑a ·∏∑ha"),
        (Itrans, "La Lha"),
        (Slp1, "La |a"),
        (Velthuis, "La Lha"),
        (Wx, "lYa lYha"),
        // Indic
        (Balinese, "·¨Æ·¨¥ ·¨Æ·¨¥·≠Ñ·¨≥"),
        (Bengali, "‡¶≤‡¶º ‡¶≤‡¶º‡ßç‡¶π"),
        (Brahmi, "ëÄ¥ ëÄ¥ëÅÜëÄ≥"),
        (Burmese, "·Ä† ·Ä†·Ä∫·Äü"),
        (Devanagari, "‡§≥ ‡§≥‡•ç‡§π"),
        (Grantha, "ëå≥ ëå≥ëççëåπ"),
        (Gujarati, "‡™≥ ‡™≥‡´ç‡™π"),
        (Javanese, "Í¶≠Í¶≥ Í¶≠Í¶≥ÍßÄÍ¶≤"),
        (Kannada, "‡≤≥ ‡≤≥‡≥ç‡≤π"),
        (Malayalam, "‡¥≥ ‡¥≥‡µç‡¥π"),
        (Odia, "‡¨≥ ‡¨≥‡≠ç‡¨π"),
        (Saurashtra, "Í¢≥ Í¢≥Í£ÑÍ¢≤"),
        (Sharada, "ëÜ≠ ëÜ≠ëáÄëÜ≤"),
        (Siddham, "ëñ©ëóÄ ëñ©ëóÄëñøëñÆ"),
        (Sinhala, "‡∑Ö ‡∑Ö‡∑ä‡∑Ñ"),
        (Takri, "ëö•ëö∑ ëö•ëö∑ëö∂ëö©"),
        (Telugu, "‡∞≥ ‡∞≥‡±ç‡∞π"),
    ]);
}

#[test]
fn other_consonants() {
    assert_two_way_pairwise(&[
        (Devanagari, "‡§ï‡§º ‡§ñ‡§º ‡§ó‡§º ‡§ú‡§º ‡§°‡§º ‡§¢‡§º ‡§´‡§º ‡§Ø‡§º ‡§±"),
        (Itrans, "qa Ka Ga za .Da .Dha fa Ya Ra"),
        (Iso15919, "qa kÕüha ƒ°a za ·πõa ·πõha fa ·∫èa ·πüa"),
    ]);
}

#[test]
fn short_e_and_o_vowels() {
    assert_two_way_pairwise(&[
        (Devanagari, "‡§é ‡§ï‡•Ü ‡§í ‡§ï‡•ä"),
        (Kannada, "‡≤é ‡≤ï‡≥Ü ‡≤í ‡≤ï‡≥ä"),
        (Malayalam, "‡¥é ‡¥ï‡µÜ ‡¥í ‡¥ï‡µä"),
        (Tamil, "‡Æé ‡Æï‡ØÜ ‡Æí ‡Æï‡Øä"),
        (Telugu, "‡∞é ‡∞ï‡±Ü ‡∞í ‡∞ï‡±ä"),
        (Iso15919, "e ke o ko"),
    ]);
}

// Scheme-specific tests
// =====================

#[test]
fn baraha_defaults_and_alternates() {
    let round_trip = |x| {
        let deva = t(x, BarahaSouth, Devanagari);
        t(&deva, Devanagari, BarahaSouth)
    };

    assert_eq!(
        "A I U au kha gha cha Cha jha pha bha va sha ha",
        round_trip("aa ee oo ou Ka Ga ca Ca Ja Pa Ba wa Sa ~ha")
    );
}

#[test]
fn baraha_accents() {
    let assert_has =
        |expected, actual| assert_transliterate(expected, BarahaSouth, Devanagari, actual);
    assert_has("a# aq", "‡§Ö‡•ë ‡§Ö‡•í");
    assert_has("aQ aV a$", "‡§Ö\u{1cd2} ‡§Ö\u{1cdd} ‡§Ö\u{1cda}");
    // TODO: aW
}

#[test]
fn devanagari_prishthamatra() {
    let assert_has =
        |expected, actual| assert_transliterate(expected, Devanagari, HarvardKyoto, actual);

    // U+094E is "DEVANAGARI VOWEL SIGN PRISHTHAMATRA E". For usage, see the spec comments on
    // U+094E.
    assert_has("‡§ï\u{0947}\u{094e}", "kai");
    assert_has("‡§ï\u{093e}\u{094e}", "ko");
    assert_has("‡§ï\u{094b}\u{094e}", "kau");
}

#[test]
fn grantha_two_part_vowels() {
    let assert_has = |expected, actual| assert_transliterate(expected, Grantha, Devanagari, actual);

    let ko = "‡§ï‡•ã";
    // Default
    assert_has("ëåï\u{1134b}", ko);
    // Permitted by Unicode spec -- see spec comments on U+1134B
    assert_has("ëåï\u{11347}\u{1133e}", ko);

    let kau = "‡§ï‡•å";
    // Default
    assert_has("ëåï\u{1134c}", kau);
    // Permitted by Unicode spec -- see spec comments on U+1134C
    assert_has("ëåï\u{11347}\u{11357}", kau);
    // Also support just "GRANTHA AU LENGTH MARK" which is permissible as a shorthand
    assert_has("ëåï\u{11357}", kau);
}

#[test]
fn iast_unicode_variants() {
    assert_supports_unicode_variants(
        Scheme::Iast,
        &[
            "ƒÅ", "ƒ´", "≈´", "·πõ", "·πù", "·∏∑", "·∏π", "·πÉ", "·∏•", "·πÖ", "√±", "·π≠", "·∏ç", "·πá", "≈õ", "·π£",
        ],
    );
}

#[test]
fn iso_tamil_aytam() {
    assert_transliterate("‡ÆÉ", Tamil, Iso15919, "·∏≥");
    assert_transliterate("\u{1e33}", Iso15919, Tamil, "‡ÆÉ");
    assert_transliterate("k\u{0323}", Iso15919, Tamil, "‡ÆÉ");
}

#[test]
fn iso_unicode_variants() {
    assert_supports_unicode_variants(
        Scheme::Iso15919,
        &["ƒÅ", "ƒ´", "≈´", "·πÅ", "·∏•", "·πÖ", "√±", "·π≠", "·∏ç", "·πá", "≈õ", "·π£"],
    );
}

#[test]
fn itrans_alternates() {
    fn assert_same(items: &[&str]) {
        let mut lipika = Lipika::new();
        let default = items[0];
        let deva = lipika.transliterate(default, Itrans, Devanagari);

        for x in &items[1..] {
            let x_deva = lipika.transliterate(x, Itrans, Devanagari);
            assert_eq!(deva, x_deva, "{default} ({deva}) != {x} ({x_deva})");
        }
    }

    assert_same(&["A kA", "aa kaa"]);
    assert_same(&["I kI", "ii kii", "ee kee"]);
    assert_same(&["U kU", "uu kuu", "oo koo"]);
    assert_same(&["RRi kRRi", "R^i kR^i"]);
    assert_same(&["RRI kRRI", "R^I kR^I"]);
    assert_same(&["LLi kLLi", "L^i kL^i"]);
    assert_same(&["LLI kLLI", "L^I kL^I"]);

    // Anusvara and candrabindu
    assert_same(&["aM", "a.m", "a.n"]);
    assert_same(&["a.N", "a{\\m+}"]);

    // Consonants
    assert_same(&["~Na", "N^a"]);
    assert_same(&["ca", "cha"]);
    assert_same(&["~na", "JNa"]);
    // TODO: source for Ca?
    assert_same(&["Cha", "chha", "Ca"]);
    assert_same(&["va", "wa"]);
    assert_same(&["Sha", "Sa", "shha"]);
    assert_same(&["za", "Ja"]);
    // TODO: L / ld?

    // Clusters
    assert_same(&["kSha", "kSa", "kshha", "xa"]);
    assert_same(&["j~na", "GYa", "dnya"]);
    assert_same(&["OM", "AUM"]);

    // Punctuation
    assert_same(&[".a", "~"]);
    assert_same(&["|", "."]);
    assert_same(&["||", ".."]);
}

#[test]
fn itrans_zero_width_joiner() {
    assert_transliterate("bara_u", Itrans, Devanagari, "‡§¨‡§∞‡§â");
    assert_transliterate("k{}Shetra", Itrans, Devanagari, "‡§ï‡•ç\u{200d}‡§∑‡•á‡§§‡•ç‡§∞");
}

#[test]
fn itrans_backslash_escape() {
    assert_transliterate("\\nara", Itrans, Devanagari, "n‡§Ö‡§∞");
    assert_transliterate("na\\ra", Itrans, Devanagari, "‡§®r‡§Ö");
    assert_transliterate("nara\\", Itrans, Devanagari, "‡§®‡§∞");
}

#[test]
fn kannada_unicode_variants() {
    assert_supports_unicode_variants(Scheme::Kannada, &["‡≤ï‡≥Ä", "‡≤ï‡≥á", "‡≤ï‡≥à", "‡≤ï‡≥ä", "‡≤ï‡≥ã"]);
}

#[test]
fn khmer_sign_robat() {
    assert_two_way_pairwise(&[(Slp1, "kra kara rka arka kara"), (Khmer, "·ûÄ·üí·ûö ·ûÄ·ûö ·ûÄ·üå ·û¢·ûÄ·üå ·ûÄ·ûö")]);
}

#[test]
fn masaram_gondi_conjuncts() {
    assert_two_way_pairwise(&[(Slp1, "kza kzA"), (MasaramGondi, "ë¥Æ ë¥Æë¥±")]);
    assert_two_way_pairwise(&[(Slp1, "jYa jYA"), (MasaramGondi, "ë¥Ø ë¥Øë¥±")]);
    assert_two_way_pairwise(&[(Slp1, "tra trA"), (MasaramGondi, "ë¥∞ ë¥∞ë¥±")]);
}

#[test]
fn saurashtra_ksha_with_zwj() {
    assert_two_way_pairwise(&[(Slp1, "kza"), (Saurashtra, "Í¢íÍ£Ñ\u{200d}Í¢∞")]);
}

#[test]
fn tamil_superscript() {
    assert_two_way_pairwise(&[
        (
            Slp1,
            "ga gA gi gI gu gU gf gF gx gX ge gE go gO gaM gaH gIM gIH devI",
        ),
        (
            Tamil,
            "‡Æï¬≥ ‡Æï‡Ææ¬≥ ‡Æï‡Æø¬≥ ‡Æï‡ØÄ¬≥ ‡Æï‡ØÅ¬≥ ‡Æï‡ØÇ¬≥ ‡Æï‡Øç¬≥‡Æ∞‡ØÅ º ‡Æï‡Øç¬≥‡Æ∞‡ØÇ º ‡Æï‡Øç¬≥‡Æ≤‡ØÅ º ‡Æï‡Øç¬≥‡Æ≤‡ØÇ º ‡Æï‡Øá¬≥ ‡Æï‡Øà¬≥ ‡Æï‡Øã¬≥ ‡Æï‡Øå¬≥ ‡Æï¬≥‡ÆÆ‡Øç º ‡Æï¬≥Íûâ ‡Æï‡ØÄ¬≥‡ÆÆ‡Øç º ‡Æï‡ØÄ¬≥Íûâ ‡Æ§‡Øá¬≥‡Æµ‡ØÄ",
        ),
    ]);
}

#[test]
fn tamil_unicode_variants() {
    assert_supports_unicode_variants(Scheme::Tamil, &["‡Æî", "‡Æï‡Øä", "‡Æï‡Øä", "‡Æï‡Øå"]);
}

#[test]
fn thai_preceding_vowels() {
    assert_two_way_pairwise(&[(Slp1, "ke kE ko kO"), (Thai, "‡πÄ‡∏Å ‡πÑ‡∏Å ‡πÇ‡∏Å ‡πÄ‡∏Å‡∏≤")]);
}

#[test]
fn telugu_unicode_variants() {
    assert_supports_unicode_variants(Scheme::Telugu, &["‡∞ï‡±à"]);
}

#[test]
fn tibetan_ba_va() {
    // TODO: why is this change made? For now, enforce for consistency with Aksharamukha default
    // behavior.
    assert_transliterate("bava", Slp1, Tibetan, "‡Ωñ‡Ωñ");
    assert_transliterate("nbanva", Slp1, Tibetan, "‡Ωì‡æ¶‡Ωì‡æ≠");
}

#[test]
fn tibetan_subjoined_consonants() {
    assert_two_way_pairwise(&[(Slp1, "nGa"), (Tibetan, "‡Ωì‡æí‡æ∑")]);
    assert_two_way_pairwise(&[(Slp1, "kf kF kx kX"), (Tibetan, "‡ΩÄ‡æ≤‡æÄ‡ºã‡ΩÄ‡æ≤‡Ω±‡æÄ‡ºã‡ΩÄ‡æ≥‡æÄ‡ºã‡ΩÄ‡æ≥‡Ω±‡æÄ")]);

    assert_two_way_pairwise(&[
        (
            // Use "nba" instead of "nva" because Tibetan does not have a "v" character.
            Slp1,
            concat!(
                "nka nKa nga nGa nNa nca nCa nja nJa nYa nwa nWa nqa nQa nRa ",
                "nta nTa nda nDa nna npa nPa nba nBa nma nya nra nla nba nSa nza nsa nha"
            ),
        ),
        (
            Tibetan,
            "‡Ωì‡æê‡ºã‡Ωì‡æë‡ºã‡Ωì‡æí‡ºã‡Ωì‡æí‡æ∑‡ºã‡Ωì‡æî‡ºã‡Ωì‡æ©‡ºã‡Ωì‡æ™‡ºã‡Ωì‡æ´‡ºã‡Ωì‡æ´‡æ∑‡ºã‡Ωì‡æô‡ºã‡Ωì‡æö‡ºã‡Ωì‡æõ‡ºã‡Ωì‡æú‡ºã‡Ωì‡æú‡æ∑‡ºã‡Ωì‡æû‡ºã‡Ωì‡æü‡ºã‡Ωì‡æ†‡ºã‡Ωì‡æ°‡ºã‡Ωì‡æ°‡æ∑‡ºã‡Ωì‡æ£‡ºã‡Ωì‡æ§‡ºã‡Ωì‡æ•‡ºã‡Ωì‡æ¶‡ºã‡Ωì‡æ¶‡æ∑‡ºã‡Ωì‡æ®‡ºã‡Ωì‡æ±‡ºã‡Ωì‡æ≤‡ºã‡Ωì‡æ≥‡ºã‡Ωì‡æ¶‡ºã‡Ωì‡æ¥‡ºã‡Ωì‡æµ‡ºã‡Ωì‡æ∂‡ºã‡Ωì‡æ∑",
        ),
    ]);
}

#[test]
fn velthuis_basic() {
    let assert_has =
        |expected, actual| assert_transliterate(expected, Velthuis, Devanagari, actual);
    // Tests are from "Devanagari for TeX", Anshuman Pandey, 2019: Table 1"

    // Signs
    // TODO: ".." --> "."
    assert_has(
        ".m / .h .a & ~a ~o .o | || ^ra @ #",
        "\u{902} \u{901} \u{903} \u{93d} \u{94d} \u{945} \u{949} ‡•ê ‡•§ ‡•• ‡§± ‡•∞ ‡•±",
    );
    // Extended consonants
    assert_has("qa .kha .ga za Ra Rha fa", "‡§ï‡§º ‡§ñ‡§º ‡§ó‡§º ‡§ú‡§º ‡§°‡§º ‡§¢‡§º ‡§´‡§º");
}
